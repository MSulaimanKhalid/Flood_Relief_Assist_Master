<html><head>


    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&amp;display=swap" rel="stylesheet">

    


    <script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/views/MapView.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/layers/KMLLayer.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/layers/ImageryLayer.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/layers/support/KMLSublayer.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/layers/support/kmlUtils.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/views/webgl.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/views/2d/mapViewDeps.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/layers/TileLayer.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/views/2d/layers/KMLLayerView2D.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/views/2d/layers/TileLayerView2D.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/views/2d/layers/LayerView2D.js"></script><script type="text/javascript" charset="utf-8" src="https://js.arcgis.com/4.22/esri/chunks/libtess.js"></script><script src="https://ffd.pmd.gov.pk/js/kmz_values.js">
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>FFD, Current state of Rivers</title>
    <style>
        html, body, #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }

        #meta {
            position: absolute;
            right: 20px;
            bottom: 83px;
            width: 10pc;

            z-index: 0;
            background: #fff;
            color: black;
            padding: 5px;
            border: 2px solid #666;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            font-family: arial;
            font-size: 0.7em;
        }

        #meta2 {
            position: absolute;
            right: 20px;
            bottom: 20px;
            width: 10pc;

            z-index: 40;
            background: #fff;
            color: red;
            padding: 5px;
            border: 2px solid #666;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            font-family: arial;
            font-size: 0.6em;
        }

        .scroll_list {
            position: absolute;
            top: 0;
            left: 0;
            display: none;
        }

        .scroll_list .slide-data {
            text-align: center;
        }

        #meta h3 {
            color: brown;
            font-size: 0.7em ;
            padding: 0px;
            margin: 0px;
            display: inline-block;
        }

        #meta p {
            color: brown;
            font-size: 0.7em ;
            padding: 0px;
            margin: 0px;
            display: inline-block;
        }

        #meta h4 {
            color: black;
            font-size: 0.7em ;
            padding: 0px;
            margin: 0px;
            display: inline-block;
        }


        body {
            margin: 0 auto;
            padding: 0;
            min-width: 320px;
        }

        .f-wrapper {
            margin: 0 auto;
            display: flex;
            background-color: #585858;
            justify-content: stretch;
        }

        .lead {
            color: white !important;
            font-weight: bold !important;
        }

        p {
            font-family: sans-serif;
        }


        /*uncomment for odd even*/
        /*
       .f-wrapper:nth-child(odd){
           background-color: #585858;
       }

           .f-wrapper:nth-child(even){
           background-color: #a4a4a4;
       }*/

    </style>

    <style>
        .widget-area {
            padding: 0;
            background-color: #fff !important;
            -webkit-border-radius: 4px !important;
            -moz-border-radius: 4px !important;
            -ms-border-radius: 4px !important;
            -o-border-radius: 4px !important;
            border-radius: 4px !important;
            -webkit-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05) !important;
            -moz-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05) !important;
            -ms-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05) !important;
            -o-box-shadow: 0 0 16px rgba(0, 0, 0, 0.05) !important;
            box-shadow: 0 0 16px rgba(0, 0, 0, 0.05) !important;
            float: left !important;
            position: relative !important;
            width: 100% !important;

            font-family: 'Poppins', sans-serif;
        }


        .social-widget {
            -webkit-border-radius: 4px !important;
            -moz-border-radius: 4px !important;
            -ms-border-radius: 4px !important;
            -o-border-radius: 4px !important;
            border-radius: 4px !important;
            float: left !important;
            overflow: hidden !important;
            width: 100% !important;
        }

        .social-widget > span {
            float: left !important;
            font-size: 14px !important;
            line-height: 10px !important;
            text-align: center !important;
            width: 100% !important;

            background: #3b5998;
            color: #3b5998 !important;
        }

        .social-widget > span.normal,  .copyright.normal {
            background: rgb(1,115,33) !important;
        }

        .social-widget > span.low,  .copyright.low {
            background: rgb(0, 87, 180) !important;
        }
        .social-widget > span.medium,  .copyright.medium {
            background: rgb(253, 126, 20) !important;
            color: black;
        }
        .social-widget > span.high, .copyright.high {
            background: rgb(253, 126, 20) !important;
        }
        .social-widget > span.very_high,  .copyright.very_high {
            background: rgb(252, 25, 44) !important;
        }

        .social-widget > span.ex_high,  .copyright.ex_high {
            background: rgb(161, 2, 17) !important;
        }

        .copyright{
            text-align: center;
            font-weight: 500;
            color: white;
        }

        .social-widget > span > h5 {
            color: white !important;
            font-weight: bold !important;
            font-size: 20px;
        }


        table.widget-table {
            width: 100%;
            table-layout: fixed;
        }

        table.widget-table td{
            padding-top: 2px;
            padding-bottom: 0;
        }

        table.widget-table td:nth-child(1) {
            font-size: 18px;
            padding-left: 10px;
        }

        table.widget-table td:nth-child(2) {
            font-size: 15px;
            font-weight: 600;
            text-align: right;
            padding-right: 10px;

        }

        table.widget-table tr:nth-child(2n) {
            background: #edfdf3;
        }

        table.widget-table tr:nth-child(2n+1) {
            background: #CCC
        }

        table.widget-table.normal tr:nth-child(2n) {
            background: #edfdf3
        }

        table.widget-table.normal tr:nth-child(2n+1) {
            background: #c9e9c3;
        }
        table.widget-table.low tr:nth-child(2n+1) {
            /*background: #c2efef;*/
            background-color: rgb(173, 216, 230);
        }
        table.widget-table.medium tr:nth-child(2n+1) {
            /*background: #dedef7;*/
            background-color: rgb(253, 253, 208);
        }
        table.widget-table.high tr:nth-child(2n+1) {
            /*background: #fce2ca;*/
            background-color: rgb(252, 225, 198);
        }

        table.widget-table.very_high tr:nth-child(2n+1) {
            /*background: #f6c5c5;*/
            background-color: rgb(255, 231, 231);
        }
        table.widget-table.ex_high tr:nth-child(2n+1) {
            /*background: #fccdcd;*/
            background-color: rgb(255, 204, 204);
        }

        .widget-table:before {
            border-bottom: 4px solid #f0f0f0 !important;
            border-left: 4px solid transparent !important;
            border-right: 4px solid transparent !important;
            content: "" !important;
            left: 50% !important;
            margin-left: -4px !important;
            position: absolute !important;
            top: -4px !important;
        }

        .widget-table {
            background: none repeat scroll 0 0 #fff !important;
            float: left !important;
            margin: 0 !important;
            padding: 0 !important;
            position: relative !important;
            width: 100% !important;
            /*   display: flex !important; */
        }


        .no-padding {
            padding: 0;
        }

        .esri-popup__main-container {
            width: 300px !important;
        }

        ‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍ .esri-popup__footer,
        .esri-popup__header {
            display: none !important;
        }

        .esri-popup__content {
            margin: 0 !important;
        }

        .esri-widget {
            display: block !important;
        }


        .cl {
            list-style: none !important;
            padding-inline-start: 0px !important;
            margin-top: 0 !important;
            margin-bottom: 2px;
        }


        .blink {
            animation: blinker 2.6s ease-out infinite !important;
        }

        @keyframes blinker {
            50% {
                opacity: 0;
            }
        }

        .mydot {
            background: rgb(66, 183, 42);
            border-radius: 50% !important;
            display: inline-block !important;
            height: 10px !important;
            margin-left: 4px !important;
            margin-right: 4px !important;
            width: 10px !important;
        }

        .btn-nature {
            max-width: 250px;
            margin: 20px auto; /* center the block button */
            color: #fff;
            font-weight: 600;
            background: linear-gradient(to right, #4caf50, #2e7d32); /* green gradient */
            border: none;
            border-radius: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .btn-nature:hover {
            background: linear-gradient(to right, #66bb6a, #388e3c);
            transform: translateY(-2px);
        }

    </style>

    <link rel="stylesheet" href="https://js.arcgis.com/4.22/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.22/"></script>

    <script>

        var KOT_MITHON = [[70.6618471,29.13008927],
            [70.5674074,29.06314633],
            [70.49415617,29.00491483],
            [70.47676812,28.95596259],
            [70.43124868,28.91515787],
            [70.36673827,28.87128139],
            [70.27886259,28.85037568],
            [70.20383469,28.81566626],
            [70.15636264,28.76251284],
            [70.09788003,28.71760662],
            [70.07003542,28.66832114],
            [70.01092722,28.62228135],
            [69.96172177,28.56822386],
            [69.8090134,28.53217335],
            [69.73253116,28.47226826],
            [69.70282965,28.42616955],
            [69.73173375,28.40734728],
            [69.7537013,28.42891826],
            [69.77977677,28.44162729],
            [69.82149182,28.47870145],
            [69.84131373,28.49885687],
            [69.87590901,28.49724314],
            [69.94866955,28.51230452],
            [70.01692665,28.5582164],
            [70.0756109,28.6104055],
            [70.14431929,28.63473537],
            [70.16623032,28.67845943],
            [70.2020704,28.70320368],
            [70.23555306,28.77304343],
            [70.28973421,28.76624021],
            [70.32662241,28.7949499],
            [70.38446986,28.81455594],
            [70.44190373,28.82684441],
            [70.4705352,28.87035153],
            [70.55855025,28.93605553],
            [70.61081385,29.01883546],
            [70.67684597,29.04533689],
            [70.7347615,29.0846386],
            [70.73537167,29.08783857],
            [70.7400595,29.14373407],
            [70.73408015,29.1895912]
        ];

        require([
            "esri/Color",
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/KMLLayer",
            "esri/layers/ImageryLayer",
            "esri/Graphic",
            "esri/geometry/Point",
            "esri/symbols/SimpleMarkerSymbol",
            "esri/geometry/Polygon",
            "esri/symbols/SimpleFillSymbol",
            "esri/renderers/ClassBreaksRenderer",
        ], function (Color,
                     Map,
                     //parser,
                     MapView,
                     KMLLayer,//Basemap,
                     ImageryLayer,
                     Graphic, Point, SimpleMarkerSymbol, Polygon, SimpleFillSymbol, ClassBreaksRenderer
        ) {

            var layer = new KMLLayer({
                // major earthquakes for latest 30 days from USGS
                url: "http://ffda.pmd.gov.pk/kmz/rivers.kmz"
                // url: "https://sites.google.com/site/mrmkhokhar/kmls/rivers.kmz"
            });
            // create base map
            var map = new Map({
                // basemap: "topo-vector",
                basemap: "topo",
                layers: [layer]
            });


            // set view
            var view = new MapView({
                container: "viewDiv",
                map: map,
                isScrollWheelZoom: false,
                center: [71,30.6],
                zoom: "6"
            });




            var colorAdjust = function (c, n, i, d) {
                for (i = 3; i--; c[i] = d < 0 ? 0 : d > 255 ? 255 : d | 0) d = c[i] + n;
                return c
            }

            function drawRiverShape(view, rings, color) {

                console.log("Drawing shape of color: "+color)

                var polygon = new Polygon({
                    rings
                });

                // Create a symbol for rendering the graphic
                var fillSymbol = new SimpleFillSymbol({
                    color,
                    style: "solid", //vertical | solid
                    outline: {
                        color: [255, 255, 255],
                        width: 0
                    }
                });

                // Add the geometry and symbol to a new graphic
                var polygonGraphic = new Graphic({
                    geometry: polygon,
                    symbol: fillSymbol
                });
                view.graphics.add(polygonGraphic);
            }

            function addPoint(view, zoom) {

                view.graphics.removeAll();


                // pakistan shape
                // Draw Pakistan KMZ
                var polygonGraphic = new Graphic({
                    geometry: new Polygon({
                        rings: kmz_pakistan
                    }),
                    symbol: new SimpleFillSymbol({

                        color: [0, 153, 51, 0.3],

                        style: "solid",

                        outline: {
                            color: [255, 255, 255],
                            width: 2
                        }
                    })
                });

                view.graphics.add(polygonGraphic);


                // Specify the latitude and longitude
                var lat = 33.753;
                var long = 67.857;

                // Create a point geometry
                var point = new Point({
                    longitude: long,
                    latitude: lat
                });

                // Create a graphic for the image
                var imageSymbol = {
                    type: "picture-marker",
                    url:  "https://ffd.pmd.gov.pk/images/web-logo-with-text.png", // Replace with your image URL
                    width: "230px", // Specify the width
                    height: "200px" // Specify the height
                };

                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: imageSymbol
                });

                // Add the graphic to the view
                view.graphics.add(pointGraphic);

                // Create a watermark graphic
                // Function to create watermark graphics
                function createWatermarkGraphics() {


                    const watermarkText = "FFD Lahore";
                    let graphics = [];

                    console.log("Crating watermarks")


                    // Define longitude and latitude ranges for Asia/Pakistan
                    for (var x = 60; x < 100; x += 1) { // Longitude range
                        for (var y = 20; y < 40; y += 1) { // Latitude range
                            var point = {
                                type: "point",
                                longitude: x,
                                latitude: y
                            };

                            var textGraphic = new Graphic({
                                geometry: point,
                                symbol: {
                                    type: "text",
                                    text: watermarkText,
                                    color: "rgba(255, 255, 255, 0.5)", // Semi-transparent white
                                    font: {
                                        size: 12,
                                        family: "Arial"
                                    },
                                    haloColor: "rgba(0, 0, 0, 0.5)", // Black halo for better visibility
                                    haloSize: "1px"
                                }
                            });

                            graphics.push(textGraphic);
                            view.graphics.add(textGraphic);
                        }
                    }
                }



                if(zoom > 7){
                    createWatermarkGraphics();
                }



                //station NORMAL

debugger;
drawRiverShape(view, KOT_MITHON, [1,115,33, 1.0]);

                // River Stations

                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Skardu River Shape File
                drawRiverShape(view, [[75.5564228950001,35.366369413],
[75.5918849120001,35.350747126],
[75.5926946720001,35.308533493],
[75.464518485,35.3710625430001],
[75.402210284,35.4114895340001],
[75.344415901,35.473438065],
[75.3234093950001,35.521635829],
[75.2994249660001,35.5495862390001],
[75.2492767050001,35.5558130520001],
[75.15913614,35.5665391470001],
[75.0794737050001,35.574148409],
[74.9396177360001,35.619105453],
[74.837534852,35.680362073],
[74.750561238,35.713151194],
[74.7201939730001,35.845614287],
[74.651407003,35.7926200850001],
[74.6481689140001,35.738145823],
[74.6486779900001,35.67578194],
[74.647821503,35.5431710280001],
[74.6082206840001,35.4723084250001],
[74.5363301850001,35.45596053],
[74.480628467,35.4483441730001],
[74.4447001410001,35.4148533650001],
[74.4109827870001,35.3979067390001],
[74.3891420460001,35.397627179],
[74.379844157,35.39708216],
[74.387054526,35.4185587490001],
[74.4319943390001,35.4340240270001],
[74.466326839,35.46498798],
[74.5220393100001,35.479605678],
[74.5810320410001,35.4943913210001],
[74.621878178,35.532243405],
[74.629747863,35.6060485520001],
[74.611930247,35.6525453670001],
[74.6298499480001,35.6954162210001],
[74.6204405700001,35.731528386],
[74.625267616,35.7962215040001],
[74.6432400140001,35.819606922],
[74.7133823790001,35.8504321980001],
[74.7411084990001,35.847178854],
[74.768436384,35.734374716],
[74.8376373250001,35.7032940780001],
[74.927227321,35.6659168140001],
[75.0187148580001,35.630671755],
[75.060882667,35.6305745510001],
[75.0806080660001,35.5964062370001],
[75.152110742,35.6011141550001],
[75.2141690500001,35.598483925],
[75.27900944,35.5892175600001],
[75.31811916,35.5952628160001],
[75.3395904870001,35.584866812],
[75.350300492,35.544545004],
[75.362844205,35.500782111],
[75.375451539,35.4766024780001],
[75.399308515,35.4804779030001],
[75.4335054040001,35.4633897080001],
[75.4948365910001,35.4111996620001],
[75.5564228950001,35.366369413]], stationColor)

                                console.log("Skardu: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 75.6040000,
                    latitude: 35.3380000
                });

                // Skardu Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Skardu Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Skardu</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">10,500</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Skardu</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>2190 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>35.3380</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>75.6040</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>10,500  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>216,400 <span style='display: block; font-size: 10px'>(NORMAL on 15-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Skardu Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Skardu",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Skardu Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Skardu",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Skardu Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "10,500",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Skardu Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Partab Bridge (Bunji) River Shape File
                drawRiverShape(view, [[72.9066339940001,34.929947602],
[72.8776277420001,34.898060592],
[72.856837919,34.898968262],
[72.8635117530001,34.919263894],
[72.8705215400001,34.9440327040001],
[72.882708698,34.9615154470001],
[72.8968018130001,34.982073169],
[72.8784733140001,35.0116482],
[72.8881203670001,35.036526182],
[72.9255278370001,35.0472636470001],
[72.9438839810001,35.048129196],
[72.9480396700001,35.064800264],
[72.9785522110001,35.0773879110001],
[72.9879771380001,35.1039641610001],
[73.022454429,35.1228643630001],
[73.042785237,35.1223655750001],
[73.073252009,35.141519773],
[73.103264461,35.1722130320001],
[73.1423491410001,35.217319951],
[73.1923323670001,35.2477214800001],
[73.21439782,35.258178882],
[73.2192070190001,35.275135355],
[73.2099519540001,35.2887141910001],
[73.1898416320001,35.292297961],
[73.1806987510001,35.3089833290001],
[73.188179405,35.323096804],
[73.1991185810001,35.336721981],
[73.1952951320001,35.3627680710001],
[73.188617315,35.391031463],
[73.1921985700001,35.4157791110001],
[73.197645391,35.432186141],
[73.2162394410001,35.448755727],
[73.229727665,35.4580611370001],
[73.2495309060001,35.4757748380001],
[73.261255098,35.4878261000001],
[73.2834837300001,35.4861280390001],
[73.2953395340001,35.5033996510001],
[73.3184889170001,35.5128939750001],
[73.3464129770001,35.509339406],
[73.3800025350001,35.5169349550001],
[73.406825181,35.525688007],
[73.4237813280001,35.536328672],
[73.4492739890001,35.539403931],
[73.465160875,35.542092858],
[73.48155267,35.544975014],
[73.4983869450001,35.5396838680001],
[73.5243238800001,35.54937181],
[73.5359409500001,35.5458939230001],
[73.565996897,35.543140959],
[73.5929742430001,35.5472702700001],
[73.627991212,35.5516175550001],
[73.6542487620001,35.5449102360001],
[73.6713349930001,35.5343682450001],
[73.7107116970001,35.5348934740001],
[73.7451643310001,35.530984603],
[73.7738487020001,35.5263024870001],
[73.8025329230001,35.518598943],
[73.820983632,35.5068980980001],
[73.841941949,35.5006787900001],
[73.8779354420001,35.501267953],
[73.906874992,35.4961891770001],
[73.9463870420001,35.495009662],
[73.975563665,35.4904528170001],
[73.9834202800001,35.4801040420001],
[73.9874243240001,35.464528757],
[74.0132481350001,35.4579481060001],
[74.033568512,35.446674892],
[74.0404377510001,35.434790391],
[74.071028627,35.441861514],
[74.1062722330001,35.4407775610001],
[74.1069167900001,35.44076253],
[74.1397665790001,35.4323830820001],
[74.1587825500001,35.4244228790001],
[74.19000808,35.414351298],
[74.2260264750001,35.421321822],
[74.261665039,35.438963787],
[74.2900480800001,35.438511281],
[74.3185203680001,35.4257762180001],
[74.3527657480001,35.4179221800001],
[74.367846721,35.418796593],
[74.370815265,35.4003591580001],
[74.362602533,35.3913165050001],
[74.3415070840001,35.3965370490001],
[74.3199591110001,35.3942423070001],
[74.2990898190001,35.3978179600001],
[74.287628769,35.4061487880001],
[74.2717430980001,35.3973535280001],
[74.27373579,35.3960548410001],
[74.2321632490001,35.395181929],
[74.206414167,35.3867053180001],
[74.175883513,35.3855047980001],
[74.1494141220001,35.392046189],
[74.117060241,35.3997012720001],
[74.08832878,35.41298082],
[74.0593633110001,35.410581689],
[74.0349636020001,35.4094797450001],
[74.015621557,35.4229340640001],
[73.9825933060001,35.4409851020001],
[73.962940055,35.4527078420001],
[73.9487726720001,35.4618965490001],
[73.915755006,35.4696427270001],
[73.8957981180001,35.466500463],
[73.8646079470001,35.466023288],
[73.8336391440001,35.473533952],
[73.803444831,35.481670271],
[73.793099129,35.492207009],
[73.7557089570001,35.505112168],
[73.7127384790001,35.507174675],
[73.6746988,35.5020718060001],
[73.6390161840001,35.505522442],
[73.6028968890001,35.516945852],
[73.579399741,35.5059737600001],
[73.5626374020001,35.4969405960001],
[73.5264863850001,35.5011595060001],
[73.4769633640001,35.505004312],
[73.4426429390001,35.5068640010001],
[73.424025971,35.492705497],
[73.394115087,35.491120428],
[73.3642568450001,35.48040575],
[73.338728873,35.475731438],
[73.3098911370001,35.481752516],
[73.2984337440001,35.4622636670001],
[73.2836967090001,35.453201983],
[73.2613734010001,35.445468513],
[73.2385710710001,35.422812062],
[73.2200397620001,35.407812623],
[73.2154395700001,35.383653581],
[73.2149252460001,35.364475854],
[73.2183568080001,35.3406815270001],
[73.211648042,35.320909784],
[73.2228124210001,35.3017897500001],
[73.2378487080001,35.276019014],
[73.23616931,35.2515066230001],
[73.2159753390001,35.2414760840001],
[73.2017614440001,35.2197699210001],
[73.1823363980001,35.2032900250001],
[73.1500304200001,35.1721523470001],
[73.1268092220001,35.152508943],
[73.1021172280001,35.129710636],
[73.0768487080001,35.115012161],
[73.0532714030001,35.105418034],
[73.0306267080001,35.101488955],
[73.0026613740001,35.0874795230001],
[72.9872735070001,35.0667213420001],
[72.9711521300001,35.0535052270001],
[72.9604359310001,35.037195495],
[72.9351703010001,35.027454361],
[72.920757393,35.0205782670001],
[72.914781905,35.0083309710001],
[72.9244866350001,34.988809281],
[72.9258366070001,34.968643931],
[72.916040824,34.952219751],
[72.9066339940001,34.929947602]], stationColor)

                                console.log("Partab Bridge (Bunji): "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 74.3700000,
                    latitude: 35.4400000
                });

                // Partab Bridge (Bunji) Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Partab Bridge (Bunji) Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Partab Bridge (Bunji)</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">17,200</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Partab Bridge (Bunji)</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>2093 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>35.4400</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>74.3700</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>17,200  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>323,500 <span style='display: block; font-size: 10px'>(NORMAL on 15-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Partab Bridge (Bunji) Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Partab Bridge (Bunji)",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Partab Bridge (Bunji) Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Partab Bridge (Bunji)",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Partab Bridge (Bunji) Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "17,200",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Partab Bridge (Bunji) Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Besham  River Shape File
                drawRiverShape(view, [[72.917555281,34.8632338830001],
[72.8688713500001,34.877863652],
[72.8892736710001,34.887387517],
[72.928529659,34.876032964],
[72.9643652770001,34.8611584550001],
[72.9930223950001,34.8500582030001],
[73.0088447750001,34.8420975170001],
[73.0055496250001,34.8134704600001],
[72.9958822040001,34.8048424630001],
[72.966931951,34.7981494630001],
[72.9504653180001,34.7801623070001],
[72.936487577,34.763510195],
[72.9139506940001,34.753991252],
[72.893226553,34.7492325000001],
[72.871349755,34.7498381980001],
[72.842967221,34.7509604680001],
[72.828408514,34.725958044],
[72.8168074810001,34.705335608],
[72.8119333440001,34.665401366],
[72.80315319,34.623324858],
[72.8010120220001,34.6035294440001],
[72.8015082150001,34.6037111850001],
[72.82320358,34.580520737],
[72.812213269,34.5335556250001],
[72.7904535470001,34.5152168560001],
[72.82451108,34.5181666550001],
[72.852127394,34.491939292],
[72.8512869800001,34.462290178],
[72.833567332,34.4292043740001],
[72.8416741500001,34.3716520420001],
[72.869012222,34.341990647],
[72.863279053,34.2970779010001],
[72.840158499,34.2080041610001],
[72.8498149490001,34.133508595],
[72.8193484770001,34.110029023],
[72.7588921920001,34.0950424640001],
[72.7226743150001,34.079430621],
[72.717998745,34.07883387],
[72.691330221,34.1002930380001],
[72.7350096060001,34.127841995],
[72.7865697920001,34.1716149910001],
[72.806149045,34.2605117030001],
[72.842511228,34.3260423310001],
[72.817200987,34.360605934],
[72.8088536920001,34.4409930080001],
[72.8382448740001,34.473672579],
[72.8199188740001,34.4985374290001],
[72.784029079,34.4860470960001],
[72.7604976360001,34.5256597870001],
[72.801220593,34.548725516],
[72.792893113,34.5847501310001],
[72.7671091080001,34.617861223],
[72.799682412,34.666446067],
[72.787938651,34.706563406],
[72.8109712880001,34.749214812],
[72.8252431280001,34.767428351],
[72.8901216150001,34.7741578650001],
[72.9272647340001,34.7962313720001],
[72.9297838260001,34.802367906],
[72.941849082,34.806054062],
[72.9634241800001,34.8182982960001],
[72.982540306,34.8232002510001],
[72.9843464840001,34.8312279250001],
[72.955360356,34.846163985],
[72.917555281,34.8632338830001]], stationColor)

                                console.log("Besham : "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 72.8600000,
                    latitude: 34.9000000
                });

                // Besham  Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Besham  Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Besham </h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">22,400</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Besham </h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>595 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>34.9000</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>72.8600</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>22,400  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>399,900 <span style='display: block; font-size: 10px'>(NORMAL on 15-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Besham  Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Besham ",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Besham  Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Besham ",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Besham  Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "22,400",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Besham  Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Tarbela Dam River Shape File
                drawRiverShape(view, [
                [72.6823818674983,34.0942801906113],[72.6654056235139,34.0856791874841],[72.6433999084796,34.0605092723833],[72.6338025147797,34.0427852497355],[72.6196850045169,34.0289410022277],[72.5809121636249,34.0103003054258],[72.5642505086942,34.0219541158013],[72.5060317529225,34.0289820758622],[72.4290313149617,34.0158023180698],[72.3717866745187,33.9871376710307],[72.2915766857257,33.9561399105285],[72.24057371107,33.9261285073196],[72.2201229259369,33.8906329816805],[72.2209698469157,33.8448141515013],[72.2176475063201,33.8258132801614],[72.2143117651264,33.8055410658839],[72.2078898415756,33.7839982821378],[72.1468404171195,33.7883830331227],[72.1026550863422,33.7976540124274],[72.061154528808,33.7777091150131],[72.0286416072937,33.7411648211212],[71.9977431290657,33.7096638517297],[71.9836030153317,33.6755027274917],[71.9632376269888,33.6261329272002],[71.9674564747578,33.6063666643276],[71.9533662391659,33.5747220161695],[71.9578412024188,33.5631806037532],[71.9483622631174,33.5301367185419],[71.9129607654322,33.4986608787405],[71.8929312235151,33.4746275091245],[71.8728970080497,33.4493385044543],[71.8620233551158,33.4265349884658],[71.8131852432983,33.414172433265],[71.7658454584456,33.3966911154338],[71.7428515386876,33.3739498786339],[71.7136596673618,33.3500254065253],[71.7014210445957,33.3195404519227],[71.6949474873315,33.2802249734593],[71.7293679978511,33.2190548282031],[71.7397949439012,33.1935862519687],[71.7305131880184,33.1656978168048],[71.724247035105,33.1441410512945],[71.7102259882507,33.1137162020991],[71.7055428436033,33.0883509987285],[71.7068663945437,33.0692777697241],[71.7065183079444,33.0362177764216],[71.6822245914215,33.0198701158228],[71.6670607921429,33.0123484320226],[71.6457066032077,32.9896070112557],[71.6187046890537,32.9847869779904],[71.589794916864,32.9798016264503],[71.5601132462906,32.9580200617057],[71.5310251551182,32.9301181028871],[71.55213898964,32.9096901903466],[71.5615665663616,32.9453066828911],[71.5904555021467,32.9452200397164],[71.6239529573232,32.9527390106682],[71.6499497724225,32.9603290683405],[71.6984715121004,32.9727519691029],[71.7244542127729,33.0018226710024],[71.7474507505121,33.0283874454103],[71.7372066712686,33.0716418195991],[71.752774751529,33.1109461606803],[71.7637735184976,33.1553341649899],[71.7701104591108,33.1832415361417],[71.7493123007731,33.2354417472612],[71.7314484235404,33.2787338088479],[71.7455010827819,33.3180080295109],[71.7470680905729,33.334549216511],[71.7462950299131,33.3469713260742],[71.8309860938276,33.3874566634154],[71.8830703784167,33.3961113726176],[71.8955190657546,33.4164133240661],[71.9112424048349,33.4469262806052],[71.9590902499364,33.4886176530191],[71.9852872871877,33.5037303497848],[71.9844272821233,33.5546428299472],[71.9957251711616,33.6041600396388],[72.0135249656588,33.6752562434649],[72.0632625189443,33.7358680289511],[72.0990038700637,33.7686111452098],[72.1432518385532,33.7631381408997],[72.1783727379094,33.7514022192866],[72.2483609512803,33.7430856910915],[72.2534995789999,33.7798710285435],[72.2606950927513,33.8496405544802],[72.2643722052336,33.8902283257838],[72.3136938656327,33.918952805385],[72.3490838029729,33.9325590702758],[72.4017829045031,33.9726220579627],[72.4372997827742,33.9899930190371],[72.4664181300194,33.9909267989549],[72.5460305475483,33.9886838115052],[72.5841450008234,33.9793040870234],[72.6598864991972,34.0164145936993],[72.7223510430812,34.080176646675],[72.6823818674983,34.0942801906113]             
            ], stationColor)

                                console.log("Tarbela Dam: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 72.7338000,
                    latitude: 34.1059000
                });

                // Tarbela Dam Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Tarbela Dam Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Tarbela Dam</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">22,000</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">63,600</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '</div>'

                                    description += ' <div class="recording_time">Current Level: <b>1497.14</b> </div> '
                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Tarbela Dam</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td> 430 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>34.1059</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>72.7338</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>22,000  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>63,600  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>382,700 <span style='display: block; font-size: 10px'>(MEDIUM on 17-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Tarbela Dam Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Tarbela Dam",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Tarbela Dam Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Tarbela Dam",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Tarbela Dam Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "63,600",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Tarbela Dam Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw KABUL River Shape File
                drawRiverShape(view, [[71.5983515894921,34.156672569446],[71.6030432039759,34.1556406240838],[71.6204305979791,34.1493233410725],[71.6428574408168,34.1373251217009],[71.6554262820826,34.1337243125918],[71.682105836177,34.1261788727353],[71.6957969162785,34.1141602102622],[71.6972401103304,34.0947421355774],[71.7055100856627,34.0799070152558],[71.716636111043,34.0817391141217],[71.7286912001122,34.0848871688702],[71.7401398959759,34.0892745789642],[71.7517833462507,34.0839296704376],[71.7620926864174,34.0759742238418],[71.7726375828228,34.0646431063616],[71.7820081498858,34.0553707044259],[71.7990736817305,34.0456348854124],[71.8162494223795,34.0414082496619],[71.8278599625778,34.0292807745117],[71.8402800604436,34.0129579565939],[71.8516649125841,34.0109828226179],[71.8662448151378,34.0142433409313],[71.8756447143089,34.0185179280017],[71.8895369294128,34.024281861402],[71.9024133157112,34.0299958809084],[71.9105298042512,34.0308172294921],[71.9168815708716,34.0205410664845],[71.9264653142933,34.0150799542877],[71.9433204338689,34.0078696106039],[71.9546368981539,34.0067261314053],[71.9733420498803,34.0022357653491],[72.0037370398006,34.0058263903141],[72.0216074941675,34.0134767858588],[72.0337949583033,34.0144822651337],[72.0567338753393,34.0075223129644],[72.0765300814708,34.0016860289138],[72.095892538966,34.0026154258955],[72.1148373662352,34.002684669775],[72.1483079770205,33.991562215868],[72.1760716680781,33.9822868087757],[72.1933359409044,33.9686913950305],[72.2099550198116,33.9576073567159],[72.2225218409612,33.9459060742163],[72.2345785286235,33.9273951433757],[72.2375258320448,33.9203338313313],[72.2478153094438,33.9284311638979],[72.2475051532996,33.933078524481],[72.2439854065631,33.938851572099],[72.2363086842849,33.946546337199],[72.2316820968504,33.9543823962426],[72.2250996577818,33.9676315054559],[72.207394779109,33.9807927086994],[72.1953955038879,33.9912404583321],[72.179854956653,34.0019561685226],[72.1574345889691,34.0085291459039],[72.1269647143331,34.0121529663972],[72.101971413983,34.0113902227603],[72.0798264826793,34.0141567667719],[72.0642139692011,34.0180644801247],[72.0489404980552,34.0245303262061],[72.0343606031584,34.028493984638],[72.0129361098505,34.0278830093967],[72.0089130596204,34.0196409187676],[71.9902510412034,34.0162000651116],[71.9749413016009,34.0158731663819],[71.9719201385538,34.0225039725236],[71.9706688212373,34.0330356327711],[71.9643801513804,34.0424670896788],[71.9475756463227,34.048856840187],[71.9246839546884,34.0545069415409],[71.9075478461027,34.0511277201578],[71.8963724956551,34.0429708423389],[71.8835256575465,34.0440142608147],[71.8526977052793,34.0391182641536],[71.8303826278407,34.0507332283012],[71.790110577617,34.0699338724622],[71.78451877553,34.0764376026449],[71.7744676270528,34.0878141415605],[71.7649906197381,34.0983658301],[71.73636715325,34.0977861895982],[71.7202058487132,34.1089407403097],[71.7143750827713,34.1255878955309],[71.693216882723,34.1418835271696],[71.6718467848453,34.1471512507083],[71.6421525374583,34.1541146713081],[71.6238044047895,34.1599514708614],[71.6044020888607,34.1661555146578],[71.5960450137462,34.1682736042918]], stationColor)

                                console.log("KABUL: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 71.9770000,
                    latitude: 34.0067000
                });

                // KABUL Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // KABUL Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">KABUL</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">6,800</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >KABUL</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Kabul River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td> 287 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>34.0067</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>71.9770</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>6,800  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>109,900 <span style='display: block; font-size: 10px'>(MEDIUM on 16-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // KABUL Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "KABUL",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // KABUL Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "KABUL",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // KABUL Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "6,800",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //KABUL Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Kalabagh River Shape File
                drawRiverShape(view, [
                [71.5072230225574,32.9275694790729],[71.4860034827379,32.9119600469959],[71.4647986019715,32.896339461142],[71.435116677048,32.8739778663346],[71.4280815809531,32.8513058896058],[71.4259732583022,32.826618669271],[71.4286784611133,32.8076301374538],[71.4182093079162,32.7684892939779],[71.404589549956,32.7370279935176],[71.384455402857,32.6916367213593],[71.3652846064805,32.6216019924082],[71.3669744223615,32.5877215618394],[71.3698523510593,32.5559068673797],[71.3582866670371,32.5172951301633],[71.35634973466,32.4849463287898],[71.3594441156601,32.4695054796823],[71.3671200927816,32.4498429319086],[71.3880492940809,32.439030556932],[71.4153658469886,32.4376205708121],[71.4183187757381,32.4630023916291],[71.4393208027058,32.4809156523307],[71.442232081879,32.5074417800277],[71.4274938408829,32.5322517774254],[71.4263136292549,32.5586424747916],[71.4558153639078,32.5699239716791],[71.4440752422346,32.6189566882387],[71.4562159613647,32.6526629824871],[71.4842783581806,32.6661832965514],[71.4788631193327,32.6958882157055],[71.4638387273375,32.7264439992219],[71.4641234079337,32.7505875751209],[71.4652818489713,32.8161452285995],[71.4592680327441,32.8585060857994],[71.4859840277205,32.873134720563],[71.5102261901201,32.8819379200849],[71.5176529549847,32.8929365009683],[71.540074574218,32.913196845672],[71.5072230225574,32.9275694790729]             
            ], stationColor)

                                console.log("Kalabagh: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 71.5219000,
                    latitude: 32.9187000
                });

                // Kalabagh Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Kalabagh Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Kalabagh</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">67,797</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">61,297</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Kalabagh</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>211 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.9187</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>71.5219</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>67,797  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>61,297  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>464,391 <span style='display: block; font-size: 10px'>(MEDIUM on 18-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Kalabagh Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Kalabagh",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Kalabagh Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Kalabagh",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Kalabagh Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "61,297",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Kalabagh Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Chashma River Shape File
                drawRiverShape(view, [[71.3598972224745,32.4185848579994],[71.3701692349496,32.3729839525624],[71.3041501381102,32.3265200555469],[71.2420668794091,32.2258164253288],[71.2112479262852,32.166486085572],[71.1387382964361,32.1372010843302],[71.0483467946947,32.0576505685182],[71.0219479973726,32.0057622629438],[70.9935531657669,31.9662596823845],[70.9420876497394,31.8991815941165],[70.9189923399313,31.8397253034359],[70.9123597842121,31.8067220562727],[70.9213718989744,31.7775361004483],[70.9343283879059,31.7633121719997],[70.8997380061013,31.7073496812957],[70.8921904645248,31.659467389907],[70.8435950786691,31.6130854677184],[70.7894755337677,31.5434854985506],[70.7862543999295,31.4925817820065],[70.7935211083358,31.4603235855071],[70.7668453654927,31.4075248913364],[70.7609024169642,31.3730079242937],[70.7716444071631,31.3469553999604],[70.7840751602356,31.3265788896266],[70.7569147026607,31.2994361706136],[70.7472288937396,31.2715215298268],[70.7591265813388,31.2475331762664],[70.7597179118088,31.2166760285236],[70.7669440443756,31.184363533075],[70.7687414188113,31.1529922488861],[70.7856930714188,31.1141093455014],[70.8038931856851,31.0721399915516],[70.7895908030394,31.0332552715309],[70.7849242264335,30.9929485857262],[70.7895586327281,30.9692806239381],[70.802612105505,30.9447034224795],[70.8149843842034,30.9242329135328],[70.821415943448,30.86644067091],[70.8204011070883,30.8219233011143],[70.8201922121472,30.765457664135],[70.7870823092161,30.7031974945765],[70.8039107365497,30.6665909333554],[70.799833780529,30.6244021419072],[70.8004520106157,30.5879665011998],[70.7992347615403,30.55355445628],[70.8097436493833,30.5349562840615],[70.839355827728,30.5213412184058],[70.8738939213575,30.5354406964886],[70.8519387519347,30.5575272570628],[70.8297161489925,30.5952094471589],[70.8291784143593,30.591555508314],[70.8307974125488,30.6373774327082],[70.8675313969177,30.6634242474412],[70.8546491041405,30.7151533965102],[70.8688770364601,30.7594599833291],[70.8703949080395,30.810257644345],[70.8608472188131,30.8758241193755],[70.8622168788384,30.9342443780782],[70.8915156619637,31.0079571073358],[70.8393399313345,31.0716449993596],[70.8188471324621,31.1733077762433],[70.8217718442889,31.2422993471671],[70.8273033865852,31.3318399514674],[70.8084209496452,31.37524969275],[70.8236468974467,31.428904379449],[70.8242557354016,31.4910726103104],[70.8447918167145,31.5514583976755],[70.8977797340111,31.5871117330385],[70.9415636894612,31.6328948122756],[70.9603147972978,31.6634478477406],[70.9761377391519,31.7232508441365],[70.9668295347237,31.7704141453462],[70.9658959222418,31.8218133824735],[71.0002595101715,31.8958155161964],[71.0317463124886,31.9301808678333],[71.0620863214392,31.9624772975826],[71.0693785792166,32.0336791478159],[71.1073693191328,32.0475499139018],[71.1421848314164,32.071695857556],[71.1837713976825,32.0917953881848],[71.2229804980171,32.1103117380843],[71.2650486834317,32.1443559097105],[71.271184036471,32.1868237137479],[71.2765064730214,32.1987846660984],[71.3204226031881,32.2412073440426],[71.3371398063045,32.27040284848],[71.3435614991987,32.2948265429079],[71.3567230583728,32.317795560292],[71.3973361821431,32.343672105615],[71.409912910829,32.36821446427],[71.4022162091495,32.4050255431966],[71.3995533762538,32.4268342115239],[71.3982235533509,32.4377469328336],[71.3598972224745,32.4185848579994]], stationColor)

                                console.log("Chashma: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 71.3794000,
                    latitude: 32.4359000
                });

                // Chashma Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Chashma Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Chashma</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">73,237</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">55,037</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Chashma</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>191 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.4359</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>71.3794</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>73,237  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>55,037  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>495,435 <span style='display: block; font-size: 10px'>(MEDIUM on 17-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Chashma Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Chashma",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Chashma Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Chashma",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Chashma Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "55,037",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Chashma Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Taunsa River Shape File
                drawRiverShape(view, [[70.83672107,30.51852775],
[70.85098786,30.45888075],
[70.78689452,30.39879799],
[70.76753207,30.32581707],
[70.75635755,30.24121039],
[70.79451536,30.14309869],
[70.75887313,29.94887757],
[70.76959572,29.87992253],
[70.75048925,29.77529714],
[70.69466656,29.62114027],
[70.68695671,29.51986634],
[70.67451653,29.44176399],
[70.68904727,29.31790643],
[70.68066542,29.20908407],
[70.6618471,29.13008927],
[70.7347615,29.0846386],
[70.73537167,29.08783857],
[70.7400595,29.14373407],
[70.73408015,29.1895912],
[70.73573753,29.23644036],
[70.73509363,29.31915038],
[70.73350882,29.40694401],
[70.72198527,29.47833824],
[70.74710108,29.55303692],
[70.75275312,29.61095702],
[70.78400534,29.67359333],
[70.7851693,29.67772071],
[70.81214823,29.7376436],
[70.79966808,29.78995642],
[70.83684339,29.85112885],
[70.84860929,29.91464682],
[70.83545168,29.98153293],
[70.83369475,30.01631842],
[70.85134369,30.05858826],
[70.83699063,30.10162429],
[70.85356152,30.16214574],
[70.8231553,30.22812451],
[70.82398928,30.28088232],
[70.81896615,30.31516249],
[70.82330722,30.3581374],
[70.83492401,30.39064661],
[70.86832681,30.41176001],
[70.89124229,30.4425696],
[70.88826706,30.48176979],
[70.87415315,30.50661211],
[70.87097144,30.52839509],
[70.83672107,30.51852775]], stationColor)

                                console.log("Taunsa: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 70.8367210,
                    latitude: 30.5185277
                });

                // Taunsa Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Taunsa Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Taunsa</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">53,685</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">47,185</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Taunsa</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>131 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>30.5185</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>70.8367</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>53,685  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>47,185  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>501,312 <span style='display: block; font-size: 10px'>(HIGH on 19-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Taunsa Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Taunsa",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Taunsa Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Taunsa",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Taunsa Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "47,185",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Taunsa Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Ganda Singh Wala River Shape File
                drawRiverShape(view, [[73.8731403801,30.3633947151],
[73.8907133963,30.3852334238],
[73.8656688316,30.3913384355],
[73.8791382853,30.4121637743],
[73.9033001211,30.4251611245],
[73.9381942749,30.444185257],
[73.9462328555,30.4563972127],
[73.9572958431,30.4814250075],
[73.9760230507,30.5012782895],
[73.998936733,30.5163003414],
[74.0228998783,30.5295633159],
[74.0491703921,30.5373037176],
[74.0733415792,30.5488025709],
[74.0868140842,30.5726449092],
[74.0998897593,30.596739549],
[74.1148188334,30.6197759443],
[74.1261960954,30.6446983024],
[74.1428827804,30.6645707997],
[74.1698607998,30.6686340392],
[74.1914291096,30.6846449856],
[74.2046935517,30.7085351543],
[74.2166758025,30.7328826376],
[74.239861184,30.7467726341],
[74.2654391702,30.756396382],
[74.2764291955,30.7803790436],
[74.279866117,30.8072912344],
[74.2960621165,30.8291084458],
[74.3136091198,30.8500653752],
[74.3296602221,30.8722394738],
[74.3478261685,30.8928016212],
[74.3725410458,30.9025297102],
[74.3970587114,30.9115866486],
[74.4116723103,30.9346749386],
[74.4331009014,30.9514060064],
[74.4581579235,30.9622543665],
[74.48297217,30.972536904],
[74.5101587596,30.9762841596],
[74.5498538355,30.9905284285],
[74.5601383409,30.9839741424],
[74.5411072477,30.964701017],
[74.5205175495,30.947804321],
[74.4946461517,30.940513969],
[74.467595236,30.9400476563],
[74.4441717244,30.9277526056],
[74.4327471541,30.9028615853],
[74.4180006384,30.8797075886],
[74.3920718651,30.8729659507],
[74.3672884941,30.8821017794],
[74.3512878418,30.868932724],
[74.356880188,30.8504161835],
[74.3567276001,30.8209342957],
[74.3349108673,30.7876696933],
[74.3131224742,30.7712074259],
[74.2913503299,30.7545827692],
[74.2872318031,30.7322431191],
[74.297134708,30.7066506291],
[74.2828718481,30.6835178799],
[74.256096426,30.6819471114],
[74.2295608274,30.6757155305],
[74.2081702179,30.6595286696],
[74.1853442573,30.6447973126],
[74.1591370641,30.636760837],
[74.1393392563,30.6200941141],
[74.127791556,30.5953325011],
[74.1159978184,30.5705845604],
[74.1002085093,30.5485093793],
[74.090615887,30.5228546289],
[74.0765950462,30.5006142506],
[74.0527026194,30.4875639049],
[74.0311388545,30.4713205507],
[74.0092094429,30.4550472636],
[73.9928257984,30.4336025126],
[73.9760097784,30.4120468578],
[73.9533753797,30.3997660913],
[73.9393556428,30.3860870574],
[73.9205288961,30.3686797227],
[73.8839382096,30.34477153]], stationColor)

                                console.log("Ganda Singh Wala: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 74.5407000,
                    latitude: 30.9954000
                });

                // Ganda Singh Wala Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Ganda Singh Wala Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Ganda Singh Wala</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">0</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Ganda Singh Wala</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Sutlej River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>200m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>30.9954</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>74.5407</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>0  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>385,569 <span style='display: block; font-size: 10px'>(EX_HIGH on 29-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Ganda Singh Wala Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Ganda Singh Wala",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Ganda Singh Wala Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Ganda Singh Wala",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Ganda Singh Wala Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "0",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Ganda Singh Wala Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Sulemanki River Shape File
                drawRiverShape(view, [[73.8703750968948,30.3903312897185],[73.8466546371115,30.3898488782113],[73.8034936992,30.3836455492374],[73.7739902632342,30.3670628260686],[73.7507249052814,30.3488340905993],[73.7236770771139,30.3615946779102],[73.6870838076795,30.3546455906274],[73.6635594232998,30.3392967537153],[73.6414063941125,30.3228304960019],[73.5874967698087,30.303435892232],[73.5252771889306,30.2987346257053],[73.4854889236178,30.2990536621396],[73.4552366630719,30.2904092968434],[73.3882399660103,30.2695296139611],[73.354209969853,30.2438321608162],[73.3374774490511,30.2204436542475],[73.3188016311317,30.1982306578697],[73.3089276203033,30.1739876880974],[73.2791243881842,30.1527336195356],[73.2467247125689,30.1302684021958],[73.2221988207747,30.1102613962791],[73.2123926398371,30.0848645412634],[73.1672509246218,30.0906872012371],[73.1134253752444,30.0779808456278],[73.096713080579,30.0627050046678],[73.0771068732886,30.0384108287192],[73.0261466924158,30.0358098731457],[72.9852835345671,30.031364064751],[72.9354973958971,30.0163706540158],[72.8849582643948,30.0027307811441],[72.8621206306091,29.9938603321533],[72.8456514693955,29.9716601720522],[72.80498800947,29.9602660631822],[72.7695706574566,29.9501418446286],[72.7517734361632,29.9278714017071],[72.7233893515866,29.9052983882477],[72.6850703667263,29.9019316351761],[72.6443246003912,29.8915974845997],[72.6128324489026,29.8815073215035],[72.5633482216271,29.8568409379188],[72.5375045743446,29.8365603324481],[72.5489903491985,29.811635095164],[72.5670776732575,29.8259521651461],[72.6086507280172,29.8429750560483],[72.6507374009536,29.8616645459602],[72.6704416793376,29.8668116263452],[72.7317360079824,29.8720923567675],[72.7709186017278,29.8944070447112],[72.8113737975142,29.9291554930503],[72.8613162703056,29.9454749171137],[72.9101465804313,29.9832862822189],[73.0297702128747,30.0057476669917],[73.0820650434555,30.0111054013616],[73.1444771693418,30.0577110940383],[73.1920009552477,30.0599596490107],[73.2225232318817,30.0560820825573],[73.254791606944,30.0819844031281],[73.2777894606025,30.1088145295483],[73.3026970853018,30.1162321733898],[73.3421381439225,30.1697267793706],[73.3716674485776,30.2012593865082],[73.3864974558857,30.2250612371371],[73.4196227727129,30.2377582484744],[73.453919225453,30.2430625781281],[73.4828946066317,30.2493940497904],[73.5040852850105,30.249834689551],[73.5302686624886,30.2618195232661],[73.5541217334992,30.2623094864614],[73.6082555451943,30.2714178671163],[73.6345990557817,30.2788141186063],[73.6751459312126,30.3025157657189],[73.6919995074287,30.3188798677013],[73.7222597873812,30.3309252044537],[73.7441499911664,30.3211887033703],[73.772881911746,30.3244302907513],[73.7937420828796,30.3437596839577],[73.8184813667627,30.3671508109533],[73.8624464660076,30.365689225047],[73.882105430049,30.3798125471514],[73.8703750968948,30.3903312897185]], stationColor)

                                console.log("Sulemanki: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 73.8663000,
                    latitude: 30.3777000
                });

                // Sulemanki Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Sulemanki Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Sulemanki</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">13,300</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">4,691</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Sulemanki</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Sutlej River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>170 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>30.3777</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>73.8663</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>13,300  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>4,691  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>154,219 <span style='display: block; font-size: 10px'>(HIGH on 31-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Sulemanki Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Sulemanki",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Sulemanki Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Sulemanki",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Sulemanki Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "4,691",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Sulemanki Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Islam River Shape File
                drawRiverShape(view, [[72.5419473241108,29.8366792783196],[72.5172142814747,29.8377093616502],[72.4800535206016,29.8419157479091],[72.4457446579517,29.8533077233574],[72.4139396060012,29.8523297544573],[72.3823199821304,29.8469156517963],[72.3484992194139,29.8458646184008],[72.3283058799503,29.8372434910803],[72.306480712554,29.8179242935117],[72.2937511585954,29.8024452647582],[72.2770783695945,29.7832995663944],[72.259087544793,29.7720967255284],[72.2464211307147,29.7557412839493],[72.2389707257836,29.736891731383],[72.2273376434855,29.7205733901218],[72.1776822381855,29.7101562957297],[72.1608376276046,29.6972229482708],[72.1567362287848,29.6722912220854],[72.1454708777987,29.648023148602],[72.1322825684054,29.6210412265921],[72.1177690929113,29.6019914567402],[72.1044301478765,29.5794380340152],[72.077688965481,29.5608902521777],[72.0512461053553,29.5600531985873],[72.0104642932705,29.5614070983298],[71.9879088176203,29.541210396851],[71.98847254018,29.5279525360723],[71.980230068421,29.5064455462825],[71.9351558016427,29.5138367764464],[71.9029220297314,29.5065886523508],[71.8822503051841,29.4908636340453],[71.8727152309985,29.4763892090022],[71.8588900241449,29.4670820573953],[71.8349614831196,29.4795625184042],[71.7933026848917,29.4790521622601],[71.7539516709549,29.4724114099689],[71.7015820456331,29.4838976568016],[71.6714857074096,29.4748942096279],[71.6365959579724,29.4595181457773],[71.6229891373374,29.4457622894445],[71.6006576894383,29.4228442428865],[71.5548566013421,29.4017366308017],[71.5099027954596,29.3841766079271],[71.4715586573226,29.377467857583],[71.4205831322336,29.3791358398499],[71.386195308731,29.3955836583981],[71.3300230554985,29.4191841878961],[71.2840750583523,29.4201093639087],[71.2513024810149,29.4224093027639],[71.2271897780143,29.4143917388615],[71.2055535406997,29.4179929847559],[71.1668252503131,29.415604546927],[71.1481414797835,29.4006798672296],[71.1150588979036,29.4073670488036],[71.0820451039629,29.4122761092726],[71.0739675517095,29.3897606402162],[71.1041360381337,29.3803066318385],[71.1503553422513,29.3768076879493],[71.179413350265,29.3885921333209],[71.2121389956005,29.3880903201943],[71.2437823037752,29.3884248230212],[71.2791739314722,29.3950992037757],[71.3200271938701,29.3939896151145],[71.3722135428714,29.3684757602158],[71.4333555708572,29.3459370300217],[71.4873093607323,29.3452622891614],[71.5252723132825,29.3599309900402],[71.5970070408293,29.3917250364364],[71.662168304386,29.4338509679483],[71.7010320191157,29.4511299838827],[71.7427223885724,29.4507878540205],[71.7797286258911,29.4414228905905],[71.8114978233244,29.4584229130846],[71.8550535699604,29.4386342491875],[71.8895177351293,29.4406575688299],[71.912843194135,29.4653180966434],[71.9455486589971,29.4849681752776],[71.9936208319451,29.4785535232909],[72.0135648032952,29.4880418483747],[72.0232479509554,29.5237559517279],[72.0616159523417,29.5311704060919],[72.0959329705569,29.5384476142482],[72.1411063696245,29.5797009734118],[72.1676670578856,29.6035507298411],[72.1843047415123,29.6465794973248],[72.1969226741657,29.6886088781386],[72.2374537410503,29.6969559095063],[72.278966572638,29.7336937116289],[72.2965811524655,29.7546307925098],[72.3294591696539,29.8062144015988],[72.3533810816512,29.8247099224191],[72.397533038022,29.8234068879541],[72.4291487151169,29.8288134846625],[72.4520328275983,29.8206306343256],[72.481047549787,29.8135166643852],[72.5087033997617,29.8161270618752],[72.5499649503849,29.8129244320688],[72.5419473241108,29.8366792783196]], stationColor)

                                console.log("Islam: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 72.5485000,
                    latitude: 29.8263000
                });

                // Islam Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Islam Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Islam</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">3,836</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">2,336</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Islam</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Sutlej River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>131 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>29.8263</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>72.5485</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>3,836  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>2,336  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>125,103 <span style='display: block; font-size: 10px'>(HIGH on 09-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Islam Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Islam",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Islam Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Islam",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Islam Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "2,336",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Islam Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Jassar River Shape File
                drawRiverShape(view, [[75.1948192278128,32.1246868608034],[75.1828936508335,32.1212711325194],[75.1719987677984,32.1136680595673],[75.1676027348935,32.1075513848478],[75.1599810460225,32.1004794807413],[75.149769220796,32.1008236334695],[75.1443500225624,32.0965775215148],[75.1356875371388,32.0890509947584],[75.1319830631789,32.0955022059146],[75.1169510632007,32.0981041260063],[75.1051047298338,32.0942394448066],[75.1013060518421,32.0849186345937],[75.0969856262303,32.0746966680003],[75.0798406897749,32.0781766273148],[75.0691185082434,32.0849844756257],[75.0573159224779,32.085765301503],[75.0471620291208,32.0759302953786],[75.0342657114345,32.0836380367345],[75.0165612961433,32.0838713122022],[75.0053413779571,32.0791002867701],[74.9926013285361,32.0678533944837],[74.9863292196284,32.0553425436663],[74.9821366903975,32.0488589412995],[74.9699396128737,32.0431983233066],[74.9620386658016,32.0366874836575],[74.9519600521812,32.0338132913074],[74.936994181527,32.0363534135457],[74.9204447651513,32.0375134379699],[74.9001145983761,32.0404536942985],[74.8733225691613,32.0446824004921],[74.8558348422159,32.0403203416844],[74.8508803511257,32.0278997553841],[74.8478988127274,32.0210123643356],[74.8373334773485,32.0185875737222],[74.8274269888001,32.0125325430859],[74.8208817718215,32.0019896435873],[74.8201376223102,31.9929123382654],[74.8200017075916,31.985471747199],[74.8253951420148,31.980360880736],[74.8221288227419,31.9746556239204],[74.808601496758,31.9641103949248],[74.8058975919973,31.9589084108266],[74.8037315209415,31.9518432456308],[74.7843585450021,31.9422090997063],[74.7633683961871,31.9442339743229],[74.7460805844813,31.9533269141509],[74.7266073508957,31.9614803118434],[74.7038704029944,31.9619237175515],[74.686813263769,31.9533668550731],[74.6793708506143,31.947170540188],[74.6687888167943,31.9367345306094],[74.6581645232225,31.9300460957162],[74.6481242529884,31.9219773803974],[74.6356487616633,31.9077265382871],[74.6248897668699,31.8947049898536],[74.6066024172109,31.8889260695907],[74.5948660934942,31.8882817339412],[74.5773948063952,31.8829425704567],[74.561107310427,31.8748606604996],[74.5525418578494,31.8600463178001],[74.5519860138587,31.844964317359],[74.558810390098,31.83141574861],[74.5350725544596,31.8133493422331],[74.528619672872,31.8019499448809],[74.5265272639338,31.7870613962621],[74.5219168893577,31.7699403100928],[74.5192776647911,31.7564943106126],[74.5161076350166,31.7435284531684],[74.516426633604,31.7229909833557],[74.5046544560019,31.7158690859128],[74.4776177483555,31.7127657726269],[74.457781049272,31.7124287376234],[74.4237350756779,31.7039062592497],[74.3997038608788,31.6942422860226],[74.3939225724514,31.6853547600881],[74.3855737664739,31.6764432722709],[74.3716894220697,31.6735702292305],[74.3590576765234,31.6693719777417],[74.3502432106884,31.6666239703767],[74.3422814898495,31.6608034631083],[74.3344721376919,31.6528159115967],[74.3283218270552,31.6435699353679],[74.3123811136546,31.633287215878],[74.2920119313165,31.6281421492077],[74.2712847141109,31.6200410137547],[74.2926497786405,31.6112982865502],[74.2994670598931,31.6174693817382],[74.3128309704986,31.6185807324124],[74.3295382186988,31.6245178912574],[74.341643598631,31.6377347901872],[74.34585167207,31.6451942445667],[74.3535641605139,31.6549077194192],[74.3746407252955,31.6587779829889],[74.3821252694672,31.6596770302586],[74.3913714439874,31.6620368428856],[74.4021045210862,31.6657409955283],[74.4090436319258,31.6755463687246],[74.4145973986944,31.6887933465594],[74.430546778866,31.6930255801806],[74.4424639598295,31.6945505373806],[74.4455247592845,31.6959218637236],[74.4485863319946,31.697293428818],[74.4496071012515,31.6977506827507],[74.4666385587471,31.7015615400215],[74.4843955287179,31.7009824299836],[74.5011132271852,31.7003856709467],[74.5193364619499,31.7039343318558],[74.5343598621702,31.7176861545212],[74.5362262424958,31.7264339303137],[74.5356535747471,31.7394063084393],[74.5352209680312,31.751455306502],[74.5415883819804,31.7636861471704],[74.5428061737464,31.774309053852],[74.5442422150491,31.7783658507463],[74.5462614533758,31.7959258469173],[74.5555449985733,31.8023855137711],[74.5669422583691,31.8093400112847],[74.5708429321974,31.8198089433585],[74.5697973355238,31.8361375786229],[74.5680376929676,31.8580161546804],[74.5851089600765,31.8747873695487],[74.6154613405712,31.8766316669014],[74.6339295604523,31.8842418130403],[74.6454413254017,31.8964522390144],[74.6519906216171,31.9037240217421],[74.6572112886245,31.9107281388101],[74.665939654443,31.9195284224549],[74.6749686588996,31.9244449480233],[74.6900445223256,31.9330423487367],[74.7017993874258,31.944008792435],[74.7134816971192,31.9489878075531],[74.7282553722688,31.9465988672175],[74.7417603982076,31.9389638939373],[74.7620238418618,31.9310130122072],[74.7740089131924,31.9307610299891],[74.7891130542127,31.9301150152906],[74.8059424587318,31.9320541077007],[74.8151056143214,31.9406651209928],[74.8256563619399,31.9555866548715],[74.8409746371949,31.9653015808161],[74.8460240028893,31.9688752812318],[74.8465528431768,31.9798462701748],[74.8349207097124,31.9933193898779],[74.8377018978124,32.0008568717428],[74.8495068947352,32.0063231673399],[74.8573508388334,32.0068742656779],[74.8671847609694,32.0101062897401],[74.8694794605134,32.0176651998255],[74.8690756343621,32.0265340797922],[74.8752477248673,32.0297290754182],[74.8880549726758,32.0259033498653],[74.8922912058176,32.0250728190852],[74.9060684878311,32.0217088949218],[74.921314608728,32.0215394281261],[74.9367889374709,32.0190035690988],[74.9495856250128,32.0168949972546],[74.9580948477283,32.0165474302078],[74.9633805086833,32.018436234856],[74.9880987293826,32.036108832268],[75.003515023891,32.0501200348462],[75.0074382119247,32.061793589317],[75.0205180719387,32.0664377279573],[75.0304947076334,32.0688035164504],[75.0418654486555,32.0611014213732],[75.0549233270845,32.0610372074878],[75.062707480242,32.0682723426994],[75.0722116581494,32.0679653887909],[75.0860389333487,32.060519356801],[75.1023576328927,32.0625043548857],[75.1096958744574,32.0666234497839],[75.1164671734458,32.0752252144582],[75.119553224943,32.0838014329804],[75.1317719899008,32.0767512368129],[75.1460277537006,32.0782653354468],[75.1538985035365,32.0896063509937],[75.1679070226479,32.0894357850136],[75.1819351692447,32.0989481700786],[75.190948550664,32.1126252141371],[75.2042247346533,32.113229479962],[75.1948192278128,32.1246868608034]], stationColor)

                                console.log("Jassar: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 74.8657000,
                    latitude: 32.0451000
                });

                // Jassar Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Jassar Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Jassar</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">1,009</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Jassar</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Ravi River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td> 229 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.0451</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>74.8657</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>1,009  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>240,500 <span style='display: block; font-size: 10px'>(EX_HIGH on 27-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Jassar Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Jassar",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Jassar Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Jassar",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Jassar Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "1,009",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Jassar Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Shahdara River Shape File
                drawRiverShape(view, [[74.2699223191063,31.6210036331225],[74.2738769659658,31.6044882347761],[74.2460214712486,31.5753489179111],[74.2234766220361,31.5459138818449],[74.1923769354598,31.5151779825135],[74.1724982728044,31.4919306814161],[74.1591257483493,31.4836675444427],[74.1533312486482,31.4641286497698],[74.1356069272958,31.454309690816],[74.1256769624866,31.4359137653964],[74.1026855133767,31.4128506789061],[74.0830263120467,31.4184907252371],[74.0641374310348,31.4204722555282],[74.050019053776,31.4023168336318],[74.0415223843914,31.3883553521322],[74.0305024110494,31.3691206006359],[74.0211004277006,31.3570162315399],[74.0098057990711,31.3477271260678],[74.0067223639773,31.3352633939512],[73.9902407254518,31.3271705381049],[73.971371235403,31.3291398505681],[73.9653460175927,31.3195501572204],[73.9587666766397,31.3027694410805],[73.9375198596763,31.3012568273453],[73.9096682803229,31.3100405225219],[73.8943878859653,31.3036729793866],[73.8860608304799,31.2914994982348],[73.8893740649796,31.2795788091476],[73.8945836988909,31.2648441666428],[73.8971194502633,31.2565780272857],[73.8812764085111,31.2565586603124],[73.8693654343979,31.2527072791216],[73.8579576172175,31.2416045149306],[73.8508260891066,31.2311653638923],[73.8545080695256,31.2101944816567],[73.8749628519566,31.2153798471779],[73.8814562186045,31.2312706020482],[73.8918814184774,31.2433290391658],[73.9101696134396,31.2477244096013],[73.9243216769183,31.2532510996276],[73.9259943224726,31.261281465532],[73.910479022206,31.2793024447586],[73.9175488467538,31.2888363337771],[73.9331186129378,31.2852548601341],[73.9767267581581,31.2891176909357],[73.9835172945903,31.3085939112749],[73.9964200998949,31.311474349579],[74.0281884507816,31.3259194358143],[74.0389916028167,31.3424565204221],[74.0540091658196,31.3587534527666],[74.0713566073557,31.391167924264],[74.0867354517722,31.3984144238371],[74.1175608504211,31.4002586369132],[74.1327495194745,31.4183480621085],[74.1482346913584,31.4400349138691],[74.1748204609782,31.4547592512012],[74.185128219007,31.4776515289646],[74.2029694435314,31.5019170527975],[74.2200989895842,31.5171916038897],[74.238002861985,31.5288071357275],[74.2488158218156,31.5444493845143],[74.2605459470621,31.5582336408165],[74.273484204021,31.5737573546793],[74.2875608387652,31.5901243272784],[74.293049981516,31.6051878714368],[74.2943852684497,31.6213982721257],[74.2699223191063,31.6210036331225]], stationColor)

                                console.log("Shahdara: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 74.2956000,
                    latitude: 31.6085000
                });

                // Shahdara Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Shahdara Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Shahdara</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">821</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Shahdara</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Ravi River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>201 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>31.6085</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>74.2956</td>
       </tr>`

                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>821  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>219,770 <span style='display: block; font-size: 10px'>(EX_HIGH on 28-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Shahdara Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Shahdara",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Shahdara Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Shahdara",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Shahdara Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "821",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Shahdara Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Balloki River Shape File
                drawRiverShape(view, [[73.8484967633266,31.2326758834133],[73.8332182907565,31.2280612969755],[73.8139905544734,31.2272850455715],[73.7867189720997,31.2323728971197],[73.7520353918977,31.2378482013287],[73.7288272650555,31.226409162705],[73.7171385167914,31.2125468469266],[73.7084262538786,31.1958140075568],[73.6673642180903,31.1862385990853],[73.6619850719684,31.1711461488735],[73.6511931246821,31.1545345377256],[73.6090782544391,31.1441142414092],[73.5820389730053,31.1365094052677],[73.543417773536,31.129511636242],[73.5051540260382,31.1270089041559],[73.4713150705073,31.1269762515346],[73.4475284777609,31.1169428578904],[73.435591352373,31.099420601571],[73.431079130967,31.0815277471181],[73.3862954554474,31.0647728944917],[73.3722897943044,31.0473717788995],[73.3362343182134,31.0328986027132],[73.3112271899939,31.0242040327862],[73.2877808923328,31.0072940944013],[73.2501076892781,30.9983362252303],[73.2331470253702,30.9829108524756],[73.2233830575759,30.9644144939041],[73.2221170841576,30.9463983913068],[73.2262475209925,30.9299194252984],[73.2104373329217,30.8999873217923],[73.1874189939819,30.902956671398],[73.1605029210827,30.8952742179596],[73.1551241063071,30.8783781832071],[73.132739499198,30.8596256708863],[73.1166679169672,30.8559151278942],[73.0873959532902,30.8438296069436],[73.0814288432047,30.8179338121669],[73.0551543030826,30.8029879741758],[73.0247865057944,30.805400729239],[73.0036233375918,30.803739986624],[72.9844232946905,30.7839196899199],[72.9695470281616,30.7656905456062],[72.9581972123926,30.7689575187585],[72.9080420749896,30.7578764581786],[72.8847594141943,30.7391443094126],[72.8781744185186,30.7186986574001],[72.8539148998194,30.7009142949892],[72.8235598098366,30.7023790735222],[72.7755851955012,30.7073882746235],[72.7505356291353,30.6932309297855],[72.7282307048869,30.6726183184404],[72.7207510378957,30.6540072961029],[72.7181595957458,30.6297439163192],[72.7170161711532,30.611731197362],[72.6839914748924,30.5870900142622],[72.6339994323239,30.575867088235],[72.5819999659272,30.5827833264338],[72.5564155948857,30.5929864652602],[72.5215816330773,30.6063205221926],[72.4743760347376,30.5894698402517],[72.4284428142902,30.5933227282196],[72.3831423837599,30.5907887658036],[72.3638561083403,30.5672234355915],[72.3199246906622,30.5700303668185],[72.2844159532942,30.5561745777895],[72.2458538802976,30.5614299365971],[72.2173068062333,30.5762002258472],[72.1801842075838,30.5886065854125],[72.1579794217787,30.5868150719467],[72.1555294548514,30.5633924250635],[72.1776203525719,30.5633807584299],[72.1920934873404,30.5591596567525],[72.2136336330231,30.5501176189811],[72.2305752869419,30.5521214663945],[72.2488478157639,30.5414002151495],[72.2841466036296,30.5344716231386],[72.3077460316578,30.5425136279133],[72.329246288832,30.5506373275397],[72.379724983759,30.5520638806473],[72.3978022739933,30.5729751914921],[72.4343826372314,30.5704626615071],[72.4847695837349,30.5709275670874],[72.5204077459275,30.5873994319364],[72.5372888414484,30.5721681087261],[72.5690914883293,30.5607838479014],[72.6172985591446,30.5603743589684],[72.6499903362519,30.5633775839492],[72.6694528931572,30.5704493474673],[72.6943503441049,30.5656889154747],[72.7409355198367,30.5879370347312],[72.7420987110899,30.5896901427831],[72.7617589889423,30.6176855215786],[72.7802675448657,30.6601775863199],[72.7963890636795,30.6819956722251],[72.8362859496345,30.6819055098404],[72.88564999944,30.6822470868717],[72.9064420103216,30.7110372857599],[72.9305351721916,30.7261156715696],[72.9555606397611,30.7393368639994],[72.9882464124816,30.741347387247],[72.9893530536917,30.742195688567],[73.0068197083569,30.7521669269303],[73.01625223071,30.7832898179961],[73.0697078311203,30.7815409597725],[73.0718623736817,30.7823362184027],[73.1060353498282,30.7905572617125],[73.1137217979463,30.8109296627782],[73.1253575859727,30.8274937396495],[73.1532692636052,30.8360167723064],[73.184279026825,30.8741629305008],[73.2265814287673,30.8774320376941],[73.2438567736786,30.883773666743],[73.2480789945389,30.9142510165684],[73.255835883867,30.9499700263128],[73.2638369580445,30.9739452998417],[73.2962221993502,30.9849379517109],[73.3269028596162,31.0014332338065],[73.3446135607325,31.0131748219914],[73.3702223886838,31.0172799199869],[73.4426336695476,31.0695936667183],[73.4711348581204,31.0979683262165],[73.5192239177713,31.1045306475819],[73.5614646489426,31.1032375476892],[73.5978419429506,31.1221639632598],[73.642243586497,31.1343407758027],[73.6743663910755,31.1380981689698],[73.6900009808322,31.1481527052864],[73.6905434311411,31.1689701001649],[73.7292078914232,31.1742043232485],[73.7418441277043,31.1998471681568],[73.764039354906,31.2113936663493],[73.8049618978948,31.2038006950311],[73.8416972724651,31.2100451929203],[73.8625292134232,31.2171238482694],[73.8484967633266,31.2326758834133]], stationColor)

                                console.log("Balloki: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 73.8596000,
                    latitude: 31.2222000
                });

                // Balloki Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Balloki Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Balloki</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">18,500</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">0</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Balloki</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Ravi River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>192 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>31.2222</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>73.8596</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>18,500  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>0  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>223,385 <span style='display: block; font-size: 10px'>(EX_HIGH on 30-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Balloki Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Balloki",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Balloki Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Balloki",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Balloki Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "0",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Balloki Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Sidhnai River Shape File
                drawRiverShape(view, [[72.1586472660376,30.5821125456474],[72.1368440252928,30.5857519799679],[72.1122139526326,30.594921167441],[72.0925010021957,30.5984641107127],[72.0575620009536,30.6107653918711],[72.0344527302565,30.6099315314402],[72.0009889188724,30.6113285155028],[71.9888936569747,30.6199508671757],[71.9679249816735,30.6199180864593],[71.9554235265294,30.6213370138466],[71.9453639223194,30.6289691942854],[71.9290250639312,30.6368591492158],[71.91333093076,30.6375031805998],[71.9016230187575,30.6343735842265],[71.8822938298627,30.6261402493451],[71.8693805440567,30.6392967827263],[71.8548753553181,30.642592484221],[71.8469098198399,30.6311861504633],[71.848413769078,30.6202982253511],[71.8584356624107,30.6117719728417],[71.8674092406483,30.6032881721133],[71.8796654357047,30.5973772176248],[71.8926628908273,30.6049671843237],[71.8991866737846,30.6092118127347],[71.9138805873996,30.6095129148003],[71.9217009057621,30.6182140809537],[71.9342532467239,30.6176982163515],[71.9599506901858,30.6085199062544],[71.9754365185649,30.6042706815963],[72.0293033561028,30.5930062698196],[72.0556469704924,30.5955093023042],[72.0728588669954,30.5848601602442],[72.0894328274362,30.5814528233211],[72.109296819168,30.5806102731854],[72.1225275800494,30.5737312525329],[72.1398351386064,30.5648710628168],[72.1566128228404,30.5650552631974],[72.1586472660376,30.5821125456474]], stationColor)

                                console.log("Sidhnai: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 72.1582000,
                    latitude: 30.5723000
                });

                // Sidhnai Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Sidhnai Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Sidhnai</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">11,216</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">3,966</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Sidhnai</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Ravi River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>141 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>30.5723</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>72.1582</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>11,216  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>3,966  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>193,470 <span style='display: block; font-size: 10px'>(EX_HIGH on 03-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Sidhnai Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Sidhnai",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Sidhnai Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Sidhnai",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Sidhnai Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "3,966",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Sidhnai Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Marala River Shape File
                drawRiverShape(view, [
                [74.4453305957354,32.6902970821776],[74.409617476801,32.6795485009495],[74.4037794555727,32.6610754398239],[74.3745902910437,32.6544442654288],[74.3478112967999,32.6442489876185],[74.2986206072082,32.6412611880487],[74.2702824025232,32.6288625637351],[74.2515940750486,32.6106602391231],[74.2340476343727,32.5900948482929],[74.1969990621649,32.5713912203839],[74.1694712962857,32.5600561074693],[74.1356572537136,32.5468394352723],[74.1158076781953,32.5304085995102],[74.0883166670259,32.5047440898219],[74.0611554995869,32.4973564399422],[74.030048968487,32.4839228093533],[74.015862363362,32.469957019562],[74.0149197136224,32.4597136482917],[74.0079047287932,32.4424208077011],[73.984264673217,32.4290487254858],[73.9675792229459,32.4175127610645],[73.975112459592,32.3958459869481],[74.0010701063324,32.4050635364677],[74.0195157452779,32.4210605881144],[74.0474055217182,32.4364390940226],[74.0575909200969,32.451234225419],[74.0797113300249,32.4629617076811],[74.0956010785906,32.4733712576566],[74.1046331807351,32.4756431302591],[74.1311446062771,32.4761965773178],[74.145897540504,32.4889595224881],[74.1603355845415,32.498307722398],[74.1753425369338,32.5064713134107],[74.1767970542039,32.5075193879621],[74.1937511248051,32.5292791519165],[74.2048748577552,32.5394102354784],[74.2218043029594,32.5462944652089],[74.2336767727598,32.5426451395418],[74.2344044008524,32.5431686781339],[74.2580443854817,32.5564649162744],[74.2744319969576,32.5719569424858],[74.2904719500721,32.5909027475256],[74.3167519815739,32.5960041885043],[74.3356409256585,32.5947338721225],[74.3634380010373,32.6014412326595],[74.3991514434138,32.6127552102704],[74.4267275855982,32.6240463450507],[74.4469983099128,32.6369737750648],[74.4644101277213,32.6483780710755],[74.4684309060374,32.6618391302387],[74.4453305957354,32.6902970821776]             
            ], stationColor)

                                console.log("Marala: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 74.4647000,
                    latitude: 32.6735000
                });

                // Marala Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Marala Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Marala</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">7,800</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">1,500</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Marala</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Chenab River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>242 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.6735</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>74.4647</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>7,800  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>1,500  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>895,740 <span style='display: block; font-size: 10px'>(EX_HIGH on 27-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Marala Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Marala",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Marala Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Marala",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Marala Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "1,500",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Marala Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Khanki River Shape File
                drawRiverShape(view, [[73.9640760062667,32.416043874003],[73.9393614467803,32.4124139403139],[73.9384100286652,32.4119410866292],[73.9199305965834,32.4079795289661],[73.8974176687862,32.408446125076],[73.8867204733329,32.4072062617968],[73.8848837073436,32.4065249113],[73.8726201726169,32.4014829452515],[73.8720125089622,32.4012587261679],[73.8630407291909,32.3937408415192],[73.8477914248777,32.3892062169781],[73.8329282479162,32.3849166255408],[73.812619225973,32.3799503481621],[73.7837967428637,32.3744637382131],[73.7596439321866,32.3672955678968],[73.7486531799945,32.363912707051],[73.7353606828537,32.358702319711],[73.7236504028852,32.3475840243873],[73.7014995048219,32.3534178532691],[73.6909267166577,32.3464419772552],[73.6853670859457,32.3279978064449],[73.690193900139,32.3142819381804],[73.6926526935151,32.3120431874877],[73.7011601250862,32.3092556002473],[73.7025398583595,32.3091814419755],[73.7162830035447,32.3072823108961],[73.7165578224031,32.3072677787689],[73.7351716234586,32.3109390313593],[73.7535701455415,32.314172493487],[73.7651348416579,32.3277500555381],[73.7812569611834,32.3396027289311],[73.7957305902822,32.3376117601117],[73.805470211116,32.3436241724079],[73.8167645102465,32.3471525880786],[73.8358083790141,32.3512533477308],[73.8566577149699,32.360733316793],[73.876300012965,32.3653712888259],[73.8774362079883,32.3653077526582],[73.8919977451595,32.3765758656364],[73.9102829437596,32.3862452769025],[73.9306090883819,32.3805188786694],[73.9458499642915,32.3837513887148],[73.9626454809797,32.3962073283197],[73.9689003118961,32.3987163393181],[73.9640760062667,32.416043874003]], stationColor)

                                console.log("Khanki: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 73.9685000,
                    latitude: 32.4088000
                });

                // Khanki Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Khanki Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Khanki</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">5,075</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">0</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Khanki</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Chenab River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>213 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.4088</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>73.9685</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>5,075  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>0  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>1,085,750 <span style='display: block; font-size: 10px'>(EX_HIGH on 27-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Khanki Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Khanki",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Khanki Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Khanki",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Khanki Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "0",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Khanki Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Q.Abad River Shape File
                drawRiverShape(view, [[73.6762807430383,32.3287297130295],[73.6620012869562,32.3328016761944],[73.6277100133593,32.3318170831511],[73.6031104061642,32.3222413731996],[73.5894789820193,32.3141246449345],[73.56299169341,32.3075248390272],[73.5453656556557,32.2982226356974],[73.5404503713337,32.2819610449593],[73.523674389697,32.2671940786363],[73.4965626621866,32.2551446363442],[73.4610655076756,32.2445082342734],[73.4192685439068,32.2398597457523],[73.3931254719001,32.2265097740277],[73.3787239627088,32.2066430887719],[73.3678901644731,32.1904839406739],[73.3545883810599,32.1747874158716],[73.3387990008075,32.1587132246692],[73.3065672427869,32.1399895299485],[73.2894477913987,32.1199689459483],[73.2693581961173,32.1093961100465],[73.2415440544385,32.0863661970423],[73.2276222212073,32.0635345026237],[73.2129064692643,32.0486754776553],[73.2040747656083,32.0312073901496],[73.1736306296747,32.0199821654765],[73.1631119854594,31.9933140197085],[73.1603950595067,31.9828746799054],[73.1437148134335,31.9672182024328],[73.1453105050752,31.9508359055982],[73.1341591167521,31.9388601169105],[73.1158813346059,31.917773623531],[73.1061312990238,31.9019959861678],[73.0913642226878,31.8839048961348],[73.0634273000395,31.8734235423212],[73.0541936490145,31.8588680540829],[73.0493913629735,31.8438174434362],[73.0515487783736,31.8299328106837],[73.0384737543738,31.8192337519292],[73.0172342262684,31.819556965931],[73.0002115846693,31.8089113109034],[72.9669003092339,31.7980933136451],[72.9550902755308,31.776461130089],[72.9479446279787,31.765242852839],[72.9451497210751,31.7497622894575],[72.9335520399089,31.7377724409711],[72.9051295981789,31.7287246189582],[72.8837495541321,31.7239870637414],[72.8618099383045,31.7154778744148],[72.8333865618693,31.703280704682],[72.8081734351214,31.7027900970403],[72.7784066353789,31.6960624034722],[72.7636473929572,31.6987814546217],[72.7433373883743,31.6948594064727],[72.7266303248411,31.6988581432351],[72.7152590339769,31.6977496664639],[72.7060062444884,31.704166949553],[72.6906598969456,31.7014300821323],[72.6699708674498,31.7029588615696],[72.65646834495,31.6926439984402],[72.6457133592129,31.6978174734806],[72.6284420630461,31.6971979509307],[72.5917716699799,31.6867486314742],[72.5876208165547,31.6746364135443],[72.587840129808,31.6586934531231],[72.5757134821349,31.6412249108638],[72.56510867992,31.6256548878908],[72.5400684658921,31.6016102856293],[72.5394158363453,31.5919599482672],[72.5086108151985,31.5755429159179],[72.4887729637215,31.5669683308841],[72.4550272767805,31.5505793706772],[72.4499244691266,31.5388866300857],[72.4327118684812,31.5403436539195],[72.4064161164517,31.5276344414013],[72.3983854378968,31.5176535585309],[72.3958356496036,31.5118071308896],[72.381370454924,31.4993776698526],[72.3679614817993,31.4915503251433],[72.3505853917158,31.4820850949859],[72.3358807097877,31.4876977795101],[72.3131348979153,31.4816399235896],[72.2964553109458,31.4707520754159],[72.2996032200238,31.4536529322672],[72.2900930187711,31.4383769855964],[72.2900847316496,31.4302814027403],[72.2900755073894,31.4212866440367],[72.2826864430304,31.4132023891414],[72.2731890531355,31.4042213516346],[72.2658043867695,31.3988346061587],[72.2584183425042,31.3898493359969],[72.2489263995331,31.3835644853214],[72.2468135638919,31.3754719462227],[72.2436452337053,31.3682810878381],[72.2436371103073,31.3583888180901],[72.2467911936296,31.3493928813029],[72.2520500908136,31.338596371976],[72.2436132475249,31.329612059618],[72.2425535866207,31.3224190987216],[72.2404405989067,31.3152271732142],[72.2351664462225,31.3062393335156],[72.2320016932705,31.2999472289082],[72.2319945028779,31.2900556437734],[72.2288302388908,31.2846626165482],[72.2277684226078,31.274771913905],[72.2224986565664,31.2693800450263],[72.2224928437726,31.2630854199986],[72.2140597536643,31.2531984539355],[72.2130029685446,31.2487026411047],[72.211945914832,31.2442068020048],[72.2119405364128,31.2397102791262],[72.2119351500242,31.2352137783448],[72.2108791242579,31.23251624145],[72.210875901253,31.2298183132299],[72.2098283727579,31.23431539401],[72.2087818296218,31.2397116875531],[72.2087860208457,31.2433089162839],[72.2066836596117,31.2469070395704],[72.188766777626,31.2325238861919],[72.1824428516045,31.2271288959383],[72.1813805877723,31.2163359278587],[72.1897876374933,31.1992450630958],[72.1918876442777,31.1920493295171],[72.1771422728996,31.1803574043449],[72.1750316708774,31.1740605783228],[72.1665985082139,31.1587667629027],[72.1718538734812,31.1506708972436],[72.175004838743,31.144373644608],[72.1834173850446,31.1380772884353],[72.1928993606329,31.1470745934135],[72.2023787832684,31.1533717084575],[72.2065995619838,31.1641649948611],[72.2076627477954,31.1758571355633],[72.2097771486158,31.1857499766959],[72.2170576697164,31.1973631033942],[72.2191807106675,31.2072644505283],[72.2307835482876,31.2180661204836],[72.2307867783162,31.2198660123047],[72.2339607928268,31.2279653652612],[72.2392524350778,31.2414633493934],[72.2382214028518,31.2531607122822],[72.260373287427,31.2747428707655],[72.2656694965805,31.2909309975374],[72.2646383773431,31.3035229512503],[72.2678221985908,31.3170109154351],[72.2720650065204,31.3331950491642],[72.2710323150015,31.3466835782271],[72.2742036348112,31.3529753926087],[72.280539826587,31.3610623357754],[72.2942518160331,31.3682423741006],[72.2995384625325,31.3781265229361],[72.3080045209965,31.3978955198194],[72.3111978173319,31.4149726302656],[72.3143871172266,31.429352167055],[72.3165478173151,31.4391122483576],[72.3197526448694,31.4463219029879],[72.3219055162497,31.4553324536701],[72.3367493075614,31.4607366158412],[72.3526278385285,31.4634309493688],[72.3642456631325,31.4589199629674],[72.3716704071569,31.4643187726651],[72.3854511968708,31.4724123671465],[72.3886528574822,31.4796134765989],[72.4162252782952,31.4984905314658],[72.426821061157,31.5038775474873],[72.4554009200436,31.5128329457789],[72.4586063200374,31.5209266559908],[72.4766537863052,31.5388892915526],[72.4904269160072,31.5460588114873],[72.5063300524678,31.5568190003999],[72.5232482968102,31.5594761432675],[72.54970546115,31.56840106474],[72.56566860219,31.5935338127002],[72.5826173425026,31.601576047491],[72.5890277754153,31.6159415666117],[72.5986066609922,31.6293962921628],[72.6145396465759,31.6455239901258],[72.6188384012151,31.659892054362],[72.626269263256,31.6661577854013],[72.6368349127418,31.6652198218487],[72.6474499910493,31.6741682771433],[72.6622442138232,31.6741104984986],[72.6855062363641,31.6767124989306],[72.6960438265064,31.6721745610145],[72.6980877005592,31.6604817805431],[72.7118075814655,31.6586256348296],[72.7287334999695,31.6630449142772],[72.7424516046344,31.6611856043665],[72.7530055810622,31.6602376517561],[72.7604091637734,31.6620003589995],[72.7773166110143,31.6637168906246],[72.7899441859781,31.6573642309905],[72.7930743897012,31.6519565948111],[72.8099598738114,31.6509728252715],[72.8396179843729,31.6642972629212],[72.8449304375557,31.6687619303479],[72.8587177338598,31.6767745886902],[72.8799966405337,31.6973237133893],[72.8863972492803,31.7053748630309],[72.8948683188048,31.7080218361042],[72.9043742059243,31.7079663126547],[72.9170418423556,31.7069926787925],[72.9233719246436,31.7060563637942],[72.9356799262587,31.7049906046352],[72.9548514724753,31.7139133478069],[72.9591565824615,31.7202009971279],[72.9635349774319,31.7336947146247],[72.965782714341,31.7462949686531],[72.9743551160376,31.755259126875],[72.9913434266973,31.7578736586409],[72.9989210209346,31.7731421720305],[73.0074373967088,31.7766973910528],[73.0159905899093,31.7838522475034],[73.0224149468904,31.7901174987827],[73.0265987812603,31.7846933132522],[73.0500336317011,31.7962579648862],[73.0725419682458,31.8204170964576],[73.0811734209479,31.8347586354187],[73.086566669924,31.8437191847466],[73.0951880806099,31.8571549718908],[73.1270754657895,31.8668284251144],[73.1367787412098,31.8820476872702],[73.1443760807403,31.8981795099558],[73.1487344857396,31.9089371827431],[73.1488844363334,31.922421810006],[73.1521924979046,31.9340839044821],[73.1714552215139,31.9510160306238],[73.1842824091616,31.9608036527976],[73.1845071497824,31.9805761194507],[73.1910196343,31.9940061507499],[73.2070516863064,32.0055603246274],[73.2220059409186,32.0153234111114],[73.2306227915291,32.0269343454253],[73.2423797404633,32.0349233308753],[73.2520276911228,32.0438274280599],[73.2563645733776,32.0518778168636],[73.2621681901461,32.0674931868225],[73.274028998784,32.0759948480643],[73.2762463497497,32.0823072692166],[73.2790062044778,32.0895168998296],[73.2866003937909,32.0989469576156],[73.2936051745389,32.1038619349526],[73.3016473560803,32.1065070013045],[73.3150018467791,32.1072976944706],[73.3364270573933,32.1129891402704],[73.3509414396607,32.1209942561443],[73.3542502927194,32.1295443300529],[73.3575696994512,32.138100764859],[73.3646014052102,32.1448160824526],[73.3673475914023,32.1506630848103],[73.3738112272116,32.1551205818487],[73.3818577249173,32.1582077663615],[73.4022253108772,32.1647908207233],[73.4077586514906,32.1791900432171],[73.4116237261446,32.1886363032756],[73.4149122414009,32.1949265648029],[73.4235512168928,32.2020681259463],[73.4322269487313,32.2119167189741],[73.4424233425825,32.2158791117295],[73.4552576864732,32.2175568907799],[73.4665027988367,32.2201522317486],[73.4670428790316,32.2205982461569],[73.478938743115,32.2313129786833],[73.4896584754918,32.2343628218935],[73.5036137834603,32.2396351152114],[73.5132872364918,32.2440487785355],[73.5202599937813,32.2462331971951],[73.5304146858246,32.247027362751],[73.535252107333,32.2492329819991],[73.5614752920149,32.2534638059759],[73.5700577526103,32.2560790452835],[73.5808270543273,32.2618306199116],[73.5883873012652,32.2671655782869],[73.5889354390976,32.268062592522],[73.5943607173015,32.2734211065518],[73.6040589475847,32.278731710933],[73.6089015230459,32.2809349697203],[73.6267919106696,32.2969919619352],[73.633254412695,32.3000798683603],[73.6381596342286,32.3058958356347],[73.6414252916909,32.3094721309625],[73.6521282139094,32.3102531272319],[73.6622835708443,32.3101373765573],[73.6708026335683,32.3082311851374],[73.6788744055882,32.3112992515032],[73.6762807430383,32.3287297130295]], stationColor)

                                console.log("Q.Abad: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 73.6851000,
                    latitude: 32.3209000
                });

                // Q.Abad Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Q.Abad Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Q.Abad</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">16,268</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">0</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Q.Abad</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Chenab River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td> 204 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.3209</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>73.6851</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>16,268  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>0  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>1,077,951 <span style='display: block; font-size: 10px'>(EX_HIGH on 27-Aug)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Q.Abad Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Q.Abad",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Q.Abad Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Q.Abad",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Q.Abad Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "0",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Q.Abad Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Trimmu River Shape File
                drawRiverShape(view, [[72.109937077551,31.0815360505678],[72.0943359582569,31.0649298186475],[72.0679760821059,31.034860787646],[72.0626342210827,31.0178167628025],[72.0298697729137,30.9532092644235],[71.9593864389672,30.8930580212493],[71.8940133692925,30.8129184750186],[71.8347789704985,30.7342957398376],[71.8186946040861,30.7009741268906],[71.7961542132579,30.6458865667749],[71.7542800909517,30.6248045235517],[71.7015671224917,30.6186248622063],[71.6002896313449,30.5556605502293],[71.5636810911697,30.5067975934717],[71.5228242791351,30.4713340547928],[71.490568421539,30.4194995811281],[71.4573918957007,30.4001152357035],[71.3847338022315,30.3473914323628],[71.3552262517314,30.2817595086821],[71.3520824059391,30.2498498991033],[71.341357333481,30.2070719442469],[71.3009039854608,30.1665605389111],[71.2753740911646,30.1236422870851],[71.2822941440879,30.0964881451621],[71.2490876023692,30.0529767218844],[71.1949592409165,30.0220659336831],[71.2092104375849,29.9816471693669],[71.1935486702331,29.9193093821375],[71.1726333040049,29.8527854939407],[71.1393567414821,29.7824814317385],[71.1421754013891,29.7532054629869],[71.1426100701727,29.7249254729823],[71.1020280214758,29.6704100830272],[71.0454294870404,29.5816201390743],[71.0156787739618,29.5172967899662],[70.9935252604471,29.4586744633975],[71.0062843360601,29.4366495705523],[71.0146363005908,29.3933671219172],[71.0197508265075,29.3681082997943],[71.0455049064716,29.3457085480574],[71.0717421455287,29.3693367631296],[71.0853150506435,29.4098287276135],[71.0616660032664,29.4492879096935],[71.0495281947306,29.4697724146922],[71.0554610908065,29.5070050407967],[71.0755968296565,29.5433654015392],[71.1109761633114,29.5886512030318],[71.1438674350331,29.6426130662438],[71.1780424550006,29.6908836849357],[71.1864408209596,29.7186595888481],[71.1897543255023,29.7855492812159],[71.2278345127024,29.8274498592603],[71.2420214771009,29.8793335595743],[71.2536473230937,29.9450661678167],[71.2605526364628,30.007570649819],[71.3051268494173,30.0529305877847],[71.3395314193641,30.1037869496888],[71.3857047306265,30.1650070533839],[71.3937665194434,30.2319544566131],[71.4122814490554,30.2727552575337],[71.4429317356083,30.2956703163583],[71.4871142227611,30.3320562958833],[71.5353132180566,30.3833493793933],[71.608329447609,30.4574209317172],[71.6216373015099,30.4939963645818],[71.6504760780333,30.5291548623028],[71.6944910395917,30.5413113720793],[71.724046910308,30.5697876723665],[71.8218167758163,30.5848673099147],[71.8406193242046,30.6230229490386],[71.8583642903141,30.646270759606],[71.8534217151633,30.6662857034619],[71.8568999445116,30.6801882860147],[71.9107529709883,30.7638645667313],[71.9624780013892,30.8306010931164],[71.9838286683176,30.8755491791447],[72.0539871204436,30.9012602142056],[72.0731040973949,30.9318024581997],[72.0964285012556,30.974775752137],[72.0957295051781,31.0072940447286],[72.1173465383523,31.0342930877213],[72.1456398549665,31.0572220973806],[72.1665686763281,31.0834299094653],[72.1833535897586,31.133098498514],[72.1507577208936,31.1416743775342],[72.109937077551,31.0815360505678]], stationColor)

                                console.log("Trimmu: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 72.1460000,
                    latitude: 31.1448000
                });

                // Trimmu Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Trimmu Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Trimmu</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">17,042</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">3,200</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Trimmu</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Chenab River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>149 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>31.1448</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>72.1460</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>17,042  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>3,200  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>550,965 <span style='display: block; font-size: 10px'>(VERY_HIGH on 01-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Trimmu Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Trimmu",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Trimmu Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Trimmu",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Trimmu Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "3,200",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Trimmu Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Panjnad River Shape File
                drawRiverShape(view, [[71.023903,29.37023861],
[70.99573612,29.34155519],
[70.97579233,29.31778759],
[70.94638426,29.29366761],
[70.91694528,29.29163099],
[70.89570813,29.27333656],
[70.88034362,29.24330119],
[70.86173955,29.2149822],
[70.82510107,29.20989246],
[70.78912238,29.19193609],
[70.77690908,29.16293572],
[70.75992603,29.14479043],
[70.73511753,29.15577962],
[70.7400595,29.14373407],
[70.73537167,29.08783857],
[70.77830553,29.11514547],
[70.80049631,29.13441109],
[70.81075132,29.16057141],
[70.84543636,29.18307225],
[70.88082665,29.19179],
[70.90117354,29.20636918],
[70.91017847,29.23707646],
[70.92390436,29.25784246],
[70.95850417,29.26191213],
[70.98116564,29.2728875],
[70.99381742,29.29453128],
[71.00609563,29.30235433],
[71.03012694,29.32902993],
[71.04403455,29.34704555],
[71.023903,29.37023861]], stationColor)

                                console.log("Panjnad: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 71.0202000,
                    latitude: 29.3464000
                });

                // Panjnad Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Panjnad Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Panjnad</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">8,909</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">2,909</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Panjnad</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Chenab River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>100 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>29.3464</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>71.0202</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>8,909  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>2,909  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>703,698 <span style='display: block; font-size: 10px'>(EX_HIGH on 11-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Panjnad Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Panjnad",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Panjnad Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Panjnad",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Panjnad Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "2,909",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Panjnad Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Mangla Dam River Shape File
                drawRiverShape(view, [[73.6324577437541,33.1307423961204],[73.6268554360298,33.1220550550441],[73.6258578998925,33.1110501090424],[73.6301011133033,33.096819066223],[73.6333160092439,33.0833787391197],[73.6477988697545,33.076695869283],[73.6661456018789,33.0735335692215],[73.6842967750521,33.0741760632131],[73.6955799576554,33.0707634538253],[73.7236348576302,33.0653894331954],[73.7391368272564,33.058311925729],[73.7508254600077,33.0261133582821],[73.7781666664833,32.9936096249084],[73.7604192123996,32.9642940292331],[73.7470877883192,32.9480787250424],[73.7374616026861,32.9282591821514],[73.7184678799503,32.9145637508213],[73.6931354338062,32.8963177485662],[73.6659716233736,32.864444215593],[73.639606171358,32.8571562562391],[73.6137717496717,32.8291199540786],[73.5959255193903,32.8030029543516],[73.5896262682108,32.7782037613035],[73.5835323595416,32.7491720563698],[73.5541921036304,32.7298773065296],[73.5331533530663,32.7083391116147],[73.5158273634288,32.6915808457049],[73.5272441787795,32.6754675624477],[73.5430492263655,32.6819882148134],[73.550637678055,32.6915986381034],[73.564317535257,32.7014509715655],[73.5738796208948,32.710276868593],[73.594999072184,32.7233431411369],[73.6045956266508,32.742318791542],[73.6118297251984,32.7679872128389],[73.6220111911262,32.7958864531527],[73.6335713705076,32.81663084275],[73.6427300400315,32.8238653236241],[73.6563310371553,32.8345394464572],[73.677787411777,32.8497425339899],[73.6899773847519,32.8582303321797],[73.7085433153734,32.8804898964757],[73.7293363184635,32.8985796561674],[73.7449938280178,32.9084437910584],[73.7550518078435,32.9193844942903],[73.7699000658228,32.9355709293399],[73.783909332152,32.948331855648],[73.7905095289786,32.9578741054361],[73.7934395819851,32.9702546362396],[73.8040120147033,32.9812035349638],[73.8047824964415,32.9964741554456],[73.7836630185073,33.0258116668503],[73.7662064056574,33.0523057525823],[73.7492599901098,33.0682310802489],[73.736636152281,33.0783757868434],[73.7118167426038,33.0897923957331],[73.6930500720878,33.0912510704298],[73.6668616109113,33.0894854891403],[73.6480523827448,33.0917834241547],[73.6429583927857,33.1030185244832],[73.6427712036293,33.1165644132211],[73.6475227552699,33.1242712868849],[73.6324577437541,33.1307423961204]], stationColor)

                                console.log("Mangla Dam: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 73.6491000,
                    latitude: 33.1507000
                });

                // Mangla Dam Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Mangla Dam Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Mangla Dam</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">5,000</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">29,415</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '</div>'

                                    description += ' <div class="recording_time">Current Level: <b>1219.30</b> </div> '
                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Mangla Dam</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Jhelum River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>335 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>33.1507</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>73.6491</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>5,000  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>29,415  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>31,915 <span style='display: block; font-size: 10px'>(NORMAL on 31-Oct)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Mangla Dam Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Mangla Dam",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Mangla Dam Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Mangla Dam",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Mangla Dam Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "29,415",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Mangla Dam Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Rasul River Shape File
                drawRiverShape(view, [[73.5134548029765,32.6936216783576],[73.495638224403,32.6882028728083],[73.4630645379824,32.6779977842649],[73.427157284875,32.6583233720308],[73.3824125239238,32.6383947447715],[73.2915278733604,32.6183111335101],[73.2501968892606,32.5977429789745],[73.2254805465765,32.588706380596],[73.1865121668285,32.5972994797981],[73.1231332089625,32.5752760815812],[73.0729944358692,32.5749575623795],[73.0105476304479,32.5570647305711],[72.963464471617,32.542450298988],[72.9103685560521,32.51944290349],[72.8757709581259,32.4998340934377],[72.8342667671959,32.4834771296885],[72.7989081476096,32.4696682847249],[72.7719417844007,32.449939633775],[72.7185927403664,32.4438099839201],[72.6648580909809,32.4286625431145],[72.6285672493012,32.4245372012475],[72.6079777087016,32.432571438152],[72.5909443279641,32.4328228778778],[72.563793263458,32.4241919547122],[72.5463672373808,32.3986588268289],[72.5266834696547,32.3875656863239],[72.5240550143784,32.3750605164445],[72.5051793166362,32.374566246568],[72.4819309516714,32.375712355498],[72.4583889360525,32.3643102111518],[72.4569403993484,32.3456936443891],[72.4489552472838,32.3289068952248],[72.4136170804733,32.326868038375],[72.39665413443,32.313194402291],[72.370277319206,32.2957474432968],[72.3627425273383,32.2729101824431],[72.3414576803803,32.2523034583919],[72.3211008406715,32.2304027116702],[72.3049092658411,32.2066648337511],[72.3005985944916,32.1854732868657],[72.2882702390927,32.1587142206078],[72.280224422809,32.1320769013736],[72.2785811061564,32.0940067570162],[72.2713475451474,32.0682278548378],[72.2636336245776,32.0376902792568],[72.2401944894425,32.0148321826276],[72.2338401512019,31.9892695169411],[72.2190128350524,31.9709313151765],[72.232683550655,31.9333453650664],[72.2275948500963,31.9134453524699],[72.2250785264553,31.8909727280523],[72.2160872318755,31.8581478695288],[72.2185127029594,31.8211556763093],[72.1969306829185,31.7809666464608],[72.1783110000398,31.7595429325228],[72.1704162233636,31.7344674241515],[72.1592822191898,31.7100102635877],[72.138306925277,31.6893078724484],[72.1488117438828,31.6651311077665],[72.1259107296987,31.638966565294],[72.1389657111414,31.6122870661844],[72.119644128469,31.5699762530874],[72.1172043466186,31.5483122601125],[72.1115507062968,31.5265701093087],[72.1167934951529,31.4880221312206],[72.104026777157,31.4543952033187],[72.0931453264894,31.4175146924245],[72.0937152675483,31.3990237372411],[72.0941350743697,31.3826084511453],[72.0925056785995,31.3722843622122],[72.0859672429046,31.3528950345184],[72.0863393705018,31.3372264685273],[72.0855595432174,31.3262973659671],[72.0904312047474,31.3142514873084],[72.0820588245462,31.2982797352733],[72.087914246331,31.2835911673706],[72.1050956384996,31.2660018914009],[72.0965910461057,31.2413012858366],[72.1059163277902,31.2221078215543],[72.1150722623753,31.2049606562374],[72.1274210117091,31.1873005767426],[72.1302461888154,31.169946410938],[72.1380793598638,31.1374109735637],[72.1545909187095,31.1267166956389],[72.1793955177578,31.121055795995],[72.1823178320751,31.1358950010838],[72.1704913891325,31.1474629882332],[72.1564136892685,31.1683425911158],[72.1446677098367,31.1893584000383],[72.1382872953513,31.223442050975],[72.1327129034917,31.2461670064185],[72.133221764544,31.283414098234],[72.1132848791625,31.3172287985162],[72.1120479267733,31.345095488339],[72.1282375312853,31.3657182513639],[72.1278430156851,31.3903678018926],[72.1238152344299,31.4109010039471],[72.1326612911206,31.4192974996496],[72.137531428658,31.4576782214472],[72.1551464741783,31.4960240143922],[72.1328731596016,31.5254149574177],[72.1495595929841,31.5659546188774],[72.1619326476137,31.6010127178451],[72.158315675166,31.6362054535135],[72.1776773612572,31.6546908835332],[72.1761441753185,31.6942320252023],[72.1973841572932,31.7101309945964],[72.2148031092266,31.7547368586428],[72.2291174844824,31.7780070642347],[72.2363925434349,31.8093350699778],[72.2421286664576,31.8504035052865],[72.2552826578424,31.8681374781225],[72.2571164984435,31.8832238826642],[72.2588273745567,31.9174385763047],[72.2603033097801,31.9408123154463],[72.2436957796858,31.9614882874767],[72.2707324553406,31.9833045613874],[72.2630686769059,32.0010649241617],[72.2763423411814,32.0156720995283],[72.2864988630675,32.0273538025589],[72.2990444516851,32.0548556775553],[72.3167706736834,32.086532143083],[72.3124235746419,32.1140351110711],[72.3187839554566,32.1487989049893],[72.3237552346704,32.1808880917941],[72.3362709250557,32.2085902612229],[72.3629792915061,32.2293914082085],[72.3654010377228,32.2410890683764],[72.3910781536217,32.2783298156707],[72.4157799794246,32.2950383232166],[72.4387787345275,32.3091684331583],[72.461929381839,32.3100796794695],[72.5030721849324,32.3478050162015],[72.5394493724018,32.3538899078971],[72.5777131663631,32.3895497779096],[72.5956430490789,32.40769231712],[72.6159133752779,32.4044141688444],[72.6339606363831,32.3983658801943],[72.6736541087777,32.4031879963276],[72.7042612309549,32.4123699392594],[72.7379811122435,32.4230027455223],[72.7819581239118,32.4232345453809],[72.8257492672748,32.4537298706912],[72.8494422133633,32.4592792758259],[72.8988271726325,32.49271529511],[72.9223944701769,32.501638339963],[72.9695468854233,32.5201628819961],[73.0077218411292,32.526871972544],[73.0660682765324,32.5491619390102],[73.1090210591819,32.5587299104382],[73.1428048970964,32.5578011846724],[73.1800350814403,32.5712413050825],[73.2278071417572,32.5619090417322],[73.297298366682,32.6001843734061],[73.3389639821347,32.6076318127685],[73.3671012963073,32.6105613373778],[73.3832609491501,32.6097040471173],[73.4096477533142,32.6187142889117],[73.4294730425114,32.63299058687],[73.4517851115683,32.6459895368856],[73.4837847316482,32.6627337012971],[73.5134947617409,32.6753026666718],[73.5223863605129,32.6762584640601],[73.5134548029765,32.6936216783576]], stationColor)

                                console.log("Rasul: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 73.5186000,
                    latitude: 32.6832000
                });

                // Rasul Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Rasul Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Rasul</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">19,895</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">0</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Rasul</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Jhelum River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>211 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>32.6832</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>73.5186</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>19,895  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>0  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>127,162 <span style='display: block; font-size: 10px'>(MEDIUM on 17-Jul)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Rasul Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Rasul",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Rasul Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Rasul",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Rasul Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "0",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Rasul Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Guddu River Shape File
                drawRiverShape(view, [[69.6995012315915,28.4281322168479],[69.6746365751739,28.4104266092242],[69.6424323474729,28.3914199675741],[69.6398221919952,28.3668115838651],[69.6301041513619,28.3256186722634],[69.5664879607668,28.3201296284829],[69.4846296760543,28.2902617745062],[69.443550140387,28.2671749182584],[69.3755842457841,28.227253970092],[69.3624708372539,28.1865739598537],[69.3261932807345,28.1286036978417],[69.3026680192768,28.1265610790788],[69.255299382218,28.144733063478],[69.230317880988,28.1106738480393],[69.2450931751771,28.0748164717507],[69.2279085252534,28.0814835283501],[69.1619814371625,28.088190793419],[69.1262186005486,28.0787959696663],[69.0883277894923,28.0703372343462],[69.031437731276,28.0610980607139],[69.031026087941,27.9983823329723],[69.0270267885047,27.9501576820125],[69.0289083977788,27.9167697299122],[68.9853112433341,27.9212043108629],[68.9374668022872,27.9368006818016],[68.9167349597002,27.9006973551355],[68.9012221252379,27.8506483958847],[68.9326657940075,27.8180785036026],[68.9135285970067,27.7778330180306],[68.9059625094487,27.7347869470531],[68.8510045484377,27.6871338992047],[68.8683172747442,27.6713922341993],[68.9258453208271,27.7167080221577],[68.9366396334461,27.772217775812],[68.9768733994037,27.8262522261664],[68.9344596130065,27.8602522857288],[68.9414934543139,27.8977875327563],[68.9719227599292,27.8795482479938],[68.9972263723209,27.8914662793546],[69.0417257407016,27.8727023553327],[69.0634112760914,27.8989620328846],[69.0569589247047,27.9494899513625],[69.0510724544042,28.0079723087757],[69.056059684211,28.0441493935498],[69.0823264415351,28.0415942765905],[69.1212852706003,28.0542402246988],[69.16438487348,28.064965721237],[69.18587153221,28.0656829036388],[69.2197421525796,28.0514439124281],[69.2562423425411,28.0441362316519],[69.2862617774856,28.0665130707079],[69.257355650112,28.0960041982453],[69.2705582913415,28.1074507662248],[69.293868232233,28.0909745414961],[69.3288181743935,28.0901258694039],[69.3518982383623,28.100511549144],[69.3868529706688,28.1403758572199],[69.4036258940455,28.216660006533],[69.4587804318331,28.2414167663555],[69.4941165584885,28.2659690755453],[69.5862686175432,28.2933533126849],[69.6267322877796,28.2885495080797],[69.6614255453158,28.3074783285269],[69.6723760914781,28.3328261232153],[69.6662794667017,28.3626564366601],[69.6790028120676,28.3731365251282],[69.7106820783079,28.3935168397208],[69.7245475992838,28.4081547267301],[69.6995012315915,28.4281322168479]], stationColor)

                                console.log("Guddu: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 69.7114000,
                    latitude: 28.4201000
                });

                // Guddu Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Guddu Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Guddu</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">50,647</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">43,102</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-down" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Guddu</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td> 74 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>28.4201</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>69.7114</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>50,647  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>43,102  <i class="glyphicon glyphicon-arrow-down" blink></i><span style='display: block; font-size: 10px'>(Falling Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>606,489 <span style='display: block; font-size: 10px'>(HIGH on 14-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Guddu Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Guddu",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Guddu Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Guddu",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Guddu Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "43,102",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Guddu Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Sukkur River Shape File
                drawRiverShape(view, [[68.853604802276,27.6912098568128],[68.8213813469457,27.6801924312679],[68.7876903116319,27.6870789394976],[68.7638510367703,27.6976441030471],[68.7488149933233,27.7054571200215],[68.7337771508442,27.715579781929],[68.7150706538337,27.7238611410172],[68.7042431087291,27.7482744866242],[68.702741771896,27.7616409484768],[68.687180880358,27.782395019207],[68.6621616631015,27.7957851945907],[68.6391132060725,27.7851757101619],[68.6139326134079,27.7662399798032],[68.6023684202319,27.750533272079],[68.5802877013835,27.7186438086545],[68.5530144795769,27.7075049367716],[68.5394048310145,27.7181046456843],[68.5142267532032,27.7268352929281],[68.4832281744655,27.7369430306282],[68.4648031425831,27.7230143962367],[68.4411023277546,27.7021131778784],[68.4231925884164,27.686773822111],[68.420555498814,27.672871968002],[68.4147580899731,27.660346028721],[68.4032035482961,27.6391119989016],[68.4000091874639,27.6215013856878],[68.348568078134,27.620507798147],[68.3172450719324,27.6100780611436],[68.2896520382619,27.5871615846289],[68.2854783039016,27.5533621857813],[68.2977415045231,27.5298043809716],[68.2908764644618,27.5151494698713],[68.250118181332,27.4781838364583],[68.259238169105,27.4443212111653],[68.2767929068749,27.4160908000593],[68.2863599107322,27.3974774161384],[68.2710856836976,27.3702185638328],[68.2329839676733,27.3688147859185],[68.1693908136016,27.3577821657652],[68.1335059601747,27.3151164584286],[68.1295219049915,27.2697516347306],[68.1530434655422,27.2331644161925],[68.167980433057,27.2099162275725],[68.1564811408039,27.1798809544384],[68.1326688258716,27.1800829029686],[68.0611307882256,27.157848647794],[68.0622892677024,27.1286881242664],[68.0301671146313,27.0947970983203],[68.0250476017228,27.0567325006514],[68.0288398205154,27.0347837152473],[68.0094625641815,26.9998509226177],[67.9969407670383,26.9700801638303],[67.9647666671426,26.9624148125859],[67.9199514317753,26.941599247458],[67.8958701678536,26.9053354908371],[67.8998080286486,26.8739981345393],[67.9131217464962,26.8596523105065],[67.9153074557556,26.8492160074773],[67.8583441122921,26.7679670128095],[67.8765876699958,26.7291395399133],[67.8715957653093,26.6914863790002],[67.871093966215,26.688193171597],[67.842944084807,26.6469603278291],[67.8125914441129,26.6184309990488],[67.8012640424133,26.5860478457949],[67.8236130042984,26.5596690438634],[67.866743653159,26.5613788294808],[67.9031452953834,26.5345403774759],[67.9038346798388,26.5073978119216],[67.8821804022712,26.4494812257413],[67.8694344623029,26.3957907425966],[67.874924844225,26.3538158651228],[67.8783916426846,26.304830734657],[67.9019627818193,26.2826039975938],[67.9151627369977,26.2524099988629],[67.9303359571366,26.2352567355013],[67.9808048254432,26.2279565969843],[67.9995343229767,26.2173362662104],[68.0219803207109,26.1692200268917],[68.0410498128515,26.1493993756308],[68.071325187563,26.1301663664824],[68.1172993781642,26.1156377882732],[68.1075775191308,26.0698109420958],[68.1314200812675,26.0418055384061],[68.1719379403228,26.0203951686859],[68.2118889422174,25.9817926191473],[68.2119058718048,25.9771376840294],[68.2260670800098,25.962742514648],[68.2439296283702,25.9223354917872],[68.263817001015,25.888025645084],[68.3070218927792,25.8747217476801],[68.3314589507495,25.8511703812216],[68.3366731765388,25.8233989372218],[68.3605142684059,25.8059058571167],[68.3605264815234,25.771204892919],[68.3268867301535,25.7177924759074],[68.3331063227189,25.6942362994562],[68.3718879933783,25.6806354400578],[68.415757548979,25.6763183609499],[68.4229294395513,25.6362048407857],[68.3992017768737,25.6189341879841],[68.3666852706331,25.5974114764737],[68.3811110032004,25.5772000153135],[68.380057647762,25.5384165289579],[68.3449763505283,25.5237441985904],[68.3201727484146,25.495259948856],[68.3103486316357,25.4636992717411],[68.2994968266475,25.4441435468985],[68.3366643253788,25.4349072569316],[68.3423474447128,25.4474575290587],[68.3449495612533,25.4867618967273],[68.3625002676725,25.5045170288511],[68.4057900595096,25.5178974934582],[68.4233259875334,25.5471359257879],[68.4208082227715,25.588644357359],[68.4481498621681,25.6308496885598],[68.4496976697897,25.6336284761726],[68.4610953781463,25.6816828655507],[68.4326082589007,25.6999009632963],[68.390181976093,25.701428155307],[68.3548820481109,25.7204821438131],[68.3636156231664,25.7361929095378],[68.3646433756973,25.7380411396238],[68.4041598038417,25.7838361317224],[68.4098739205821,25.8238905520047],[68.3766121370468,25.8536441562567],[68.35611228688,25.8765779553318],[68.3304387523214,25.8995113140637],[68.2882374056169,25.9344049973625],[68.2660464001444,25.9846749202697],[68.2091117636016,26.0330809618584],[68.1477977347401,26.0765007444267],[68.1537183774773,26.1349584942151],[68.1275985139691,26.1676108283502],[68.0695675250259,26.1756928397941],[68.0453628687301,26.1988820035381],[68.0463223047057,26.2490635777607],[68.0065845976207,26.2721193705629],[67.9843744984234,26.2783459323391],[67.974999668603,26.3077442260702],[67.9325009759661,26.3285180279505],[67.9173270140197,26.3708411782486],[67.9207677127683,26.4258438714903],[67.922680300642,26.4734676500577],[67.9509860474118,26.5549684677654],[67.925782096664,26.5703510251406],[67.8845975019745,26.6249397264724],[67.9238482624464,26.6625948044913],[67.9173837721074,26.7000814429115],[67.9107790635887,26.7631063233911],[67.9300417134324,26.804609319543],[67.9546014925309,26.836854101191],[67.9533314742752,26.8837152529322],[67.951528181467,26.929671241108],[68.0098819902498,26.9309846784751],[68.0558757255435,26.9757619485424],[68.0578008865375,27.0235458118936],[68.0774869238753,27.093698926375],[68.1188077942133,27.1346334325269],[68.1831986785953,27.1421113731345],[68.2171408162289,27.1699422344457],[68.2144798906297,27.2093794998891],[68.1851145603634,27.2410016233718],[68.1661476172005,27.2842903427383],[68.1765600710976,27.3215117068576],[68.2116835632039,27.3395585775086],[68.2572762786001,27.3272953609436],[68.2991561538483,27.3348889484911],[68.3221463155922,27.3958741132907],[68.2986250869063,27.4565808097391],[68.3258854354415,27.4862581883108],[68.3327428944748,27.5357153061978],[68.3296402586591,27.5839213595985],[68.3810428167331,27.5862688851647],[68.4255741523323,27.595205265889],[68.451480847316,27.6665689302502],[68.4950828567929,27.6993641426423],[68.5263066276628,27.6709140360236],[68.5775015113558,27.6754940603944],[68.6047579867955,27.6934265026361],[68.6364820572797,27.7445580984357],[68.6575841325832,27.7700748873609],[68.6692426703515,27.7352488499098],[68.6913577340819,27.7073744240757],[68.7161560536974,27.691194577641],[68.738184007124,27.6633942972444],[68.7732475387443,27.6448216906605],[68.8314685804291,27.6599916108532],[68.8616446119619,27.6694359529458],[68.853604802276,27.6912098568128]], stationColor)

                                console.log("Sukkur: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 68.8462000,
                    latitude: 27.6790000
                });

                // Sukkur Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Sukkur Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Sukkur</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">42,015</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">12,465</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-up" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Sukkur</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>57 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>27.6790</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>68.8462</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>42,015  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>12,465  <i class="glyphicon glyphicon-arrow-up" blink></i><span style='display: block; font-size: 10px'>(Rising Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>518,120 <span style='display: block; font-size: 10px'>(HIGH on 16-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Sukkur Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Sukkur",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Sukkur Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Sukkur",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Sukkur Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "12,465",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Sukkur Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                
                

                                var stationColor = [1,115,33, 1.0];
                


                                //Draw Kotri River Shape File
                drawRiverShape(view, [[68.2949076893148,25.4413233019935],[68.2807129127499,25.4205060926196],[68.283711079603,25.3844753304147],[68.2934890932077,25.3501720028744],[68.3022906032879,25.2939681529409],[68.259272357649,25.2290245752688],[68.2586294323841,25.176366596391],[68.2809783315212,25.1237139746567],[68.2523646547963,25.0424821456686],[68.2009204495516,25.0111652443464],[68.1312909708084,24.9957619932239],[68.0926047219011,24.9523508496939],[68.0832460339802,24.9060540506743],[68.0745008713949,24.8625607577],[68.0342161572644,24.8379477237394],[68.0088294192518,24.7997215906737],[67.9943363688648,24.7411100266083],[67.9614292894104,24.7209669370922],[67.9432349506137,24.6745631212059],[67.9446731569238,24.6368055429462],[67.9591043822193,24.5915560962711],[67.9478885939846,24.5450731798018],[67.9632432791564,24.5071517875183],[67.9548300093943,24.461887986849],[67.9089300082923,24.4636610184154],[67.8710943677907,24.4437914215274],[67.8519325961025,24.4044472657444],[67.8484707418648,24.3524945717476],[67.804620676304,24.360802782049],[67.7790185263369,24.3387335421887],[67.7714056625418,24.3088696338533],[67.7698968725471,24.2779215952685],[67.7444744040211,24.2476923279753],[67.7130239327749,24.2248604527443],[67.6871804524427,24.1836620329214],[67.6591333946031,24.1439787315547],[67.619955804121,24.1264830252346],[67.5816162309885,24.1099732642424],[67.5231494285405,24.0882259263293],[67.479939394278,24.0637817481085],[67.434501729596,24.040843991856],[67.3866674027012,24.0066515818081],[67.4202792085531,23.9526445703792],[67.4537487605233,23.9759630762],[67.4948573876285,23.9874803108439],[67.566391267118,24.0290946555971],[67.6195759402255,24.0529228199186],[67.6564634858941,24.0656289865395],[67.6873193545043,24.0857473607005],[67.7226554915747,24.1299695948318],[67.7601908563224,24.1725981376855],[67.7765381713594,24.2108166445917],[67.8149329715994,24.2335592355364],[67.8351005953459,24.2658588439678],[67.8275456467457,24.3047691063155],[67.8586606984427,24.3021684587454],[67.887905408439,24.3264658112445],[67.8929933813698,24.3533028096637],[67.8934149954898,24.3849977861268],[67.9169891007777,24.4004589221854],[67.9689797047771,24.3976015218255],[68.0074193731031,24.4410126829939],[68.0110050865025,24.478479833514],[68.0174686028829,24.502728320547],[68.0134243624791,24.5519245260685],[68.0259313093476,24.5895213132191],[68.021204887564,24.62960019854],[68.0048263250224,24.6538535289753],[68.0207283606994,24.6746921166012],[68.0417390129419,24.7015488276028],[68.0573333134157,24.738602477917],[68.0776386610866,24.7915641208048],[68.1113517098237,24.8063623778064],[68.1371877760027,24.8346836135727],[68.1560075718203,24.8775439050624],[68.1451497183079,24.8979576863305],[68.1591134692135,24.9330328835617],[68.188522290508,24.9364765009362],[68.2390203927522,24.9460050819474],[68.2747963297129,24.9610238228727],[68.2925333235151,24.9838848231848],[68.316911457344,25.0165797237147],[68.3408052278501,25.0673318379246],[68.3385516785832,25.0978437270222],[68.3477462233341,25.1251786399052],[68.3476040696479,25.1478105695888],[68.3427872193521,25.1753422816659],[68.3372207879477,25.2082334179061],[68.347181319097,25.2302574666034],[68.3718667225832,25.2756992274221],[68.3797852269833,25.3202458572154],[68.3703201462693,25.3527987698795],[68.3515869405268,25.3724557615074],[68.3401110381633,25.4047706487203],[68.3360371645548,25.4416155021434],[68.2949076893148,25.4413233019935]], stationColor)

                                console.log("Kotri: "+ stationColor + ":" + "NORMAL")


                view.popup.dockOptions = {
                    breakpoint: false // disables the auto "dock on small screen"
                };

                function isSmallScreen(view) {
                    return view.widthBreakpoint === "xsmall" || view.widthBreakpoint === "small";
                }

                view.on("click", async function(event) {

                    const response = await view.hitTest(event);
                    const results = response.results;


                    if (results.length) {

                        const graphic = results[0].graphic;

                        if (isSmallScreen(view)) {
                            // Generate the popup content (same as Esri would)
                            const content = await graphic.popupTemplate?.content;
                            if(content){
                                showCustomDialog(graphic, content);
                            }
                            // Render inside custom dialog
                        } else {
                            // Normal popup for larger screens
                            view.popup.open({
                                features: [graphic],
                                location: event.mapPoint
                            });
                        }
                    }
                });

                //station points
                var point = new Point({
                    longitude: 68.3151000,
                    latitude: 25.4428000
                });

                // Kotri Marker Symbol
                var markerSymbol = new SimpleMarkerSymbol({
                    color: stationColor,
                    size: zoom * 2,
                    outline: {
                        color: [255, 255, 255],
                        width: 1
                    }
                });

                // Kotri Popup Template
                var description = ' <div class="widget-area no-padding blank"> <div class="social-widget"><span><h5 class="lead">Kotri</h5></span><div class="gauges">'


                                    description += '<div class="gauge"> <div>INFLOW</div> <div class="discharge">9,412</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '<div class="gauge"> <div>OUTFLOW</div> <div class="discharge">732</div> <div class="status status-normal">NORMAL  <i class="glyphicon glyphicon-arrow-right" blink></i></div> </div>'
                                    description += '</div>'

                

                var d = `<div class="widget-area">
   <div class="social-widget">
      <span class="normal">
         <h5 >Kotri</h5>
      </span>
     <table class="widget-table normal">
       <tr>
         <td>River Name</td>
         <td>Indus River</td>
       </tr>
       <tr>
         <td>Station Height</td>
         <td>15 m</td>
       </tr>
       <tr>
         <td>Latitude</td>
         <td>25.4428</td>
       </tr>
       <tr>
         <td>Longitude</td>
         <td>68.3151</td>
       </tr>`

                                    d += `<tr>
         <td>INFLOW</td>
         <td>9,412  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                                    d += `<tr>
         <td>OUTFLOW</td>
         <td>732  <i class="glyphicon glyphicon-arrow-right" blink></i><span style='display: block; font-size: 10px'>(Steady Trend)</span></td>
       </tr>`
                
                    d += `
         <td>Status</td>
         <td>NORMAL</td>
       </tr>
       <tr>
         <td>Last Reading at</td>
         <td>29-Nov 06 PKT</td>
       </tr>
              <tr>
         <td>Max. Peak <span style='display block; font-size: 10px'></span></td>
         <td>393,560 <span style='display: block; font-size: 10px'>(MEDIUM on 26-Sep)</span></td>
       </tr>
              <tr>
        <td colspan="2" class="copyright normal" style="padding: 5px;font-size: 12px;text-align: font-weight: 500;">© Flood Forecasting Division, Lahore.</td></tr>
     </table>
   </div>
</div>`


                description += '</div> </div>'


                // Kotri Point
                var pointGraphic = new Graphic({
                    geometry: point,
                    symbol: markerSymbol,
                    popupTemplate: {
                        title: "Kotri",
                        actions: [],
                        content: d,
                        overwriteActions: true,
                        actions: []
                    }
                });

                // Kotri Station Name Graphic
                var textGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        color: "black",
                        text: "Kotri",
                        xoffset: 0,
                        yoffset: zoom * -2,
                        font: {
                            size: 7,
                            family: "Merriweather",
                            weight: "bold"
                        }
                    },
                });
                // Kotri Discharge Value Graphic
                var dischargeGraphic = new Graphic({
                    geometry: point,
                    symbol: {
                        type: "text",
                        // color: colorAdjust(stationColor, -90),
                        color: "black",
                        text: "732",
                        xoffset: 0,
                        yoffset: zoom * 1.5 - 2,
                        font: {
                            size: zoom + 1,
                            family: "Merriweather",
                            //weight: "bold"
                        }
                    },
                });

                //Kotri Insert Graphics
                view.graphics.add(pointGraphic);

                if (zoom > 6) {
                    view.graphics.add(textGraphic);
                    view.graphics.add(dischargeGraphic);
                }

                                



            }

            var timeout = 0;

            view.watch("resolution", function (resolution) {
                // console.log("resolution", resolution)
                // console.log("graphics", view.zoom)

                clearTimeout(timeout)

                timeout = setTimeout(function () {
                    addPoint(view, view.zoom)
                }, 1000)

            });

            view.on("mouse-wheel", function (evt) {
                // prevents zooming with the mouse-wheel event
                //console.log("mouse-wheel")
                evt.stopPropagation();
            })

            view.when().then((_) => {
                view.whenLayerView(layer).then((layerView) => {
                    let lResult = {attributes: {NAME: null}};
                    view.on("pointer-move", (event) => {

                        view.hitTest(event).then(({
                                                      results
                                                  }) => {
                            const result = results[0];

                            if (result) {
                                // console.log("pointer-move", result.graphic)
                                if (result.graphic.popupTemplate && result.graphic.popupTemplate.autoOpenEnabled) {
                                    if (lResult.attributes.NAME !== result.graphic.popupTemplate.title) {
                                        view.popup.open({
                                            features: [result.graphic],
                                            location: result.graphic.geometry
                                        });
                                        lResult.attributes.NAME = result.graphic.popupTemplate.title;
                                    }
                                } else {
                                    if (lResult.attributes.NAME !== null) {
                                        view.popup.close();
                                        lResult.attributes.NAME = null;
                                    }
                                }
                            } else {
                                if (lResult.attributes.NAME !== null) {
                                    view.popup.close();
                                    lResult.attributes.NAME = null;
                                }
                            }
                        });
                    });
                });
            });


            addPoint(view, 7)

        });

        function showCustomDialog(graphic, content) {
            debugger
            // Use popup title


            // Use popup content (HTML or string)
            const dialogContent = document.getElementById("dialogContent");
            if (Array.isArray(content)) {
                dialogContent.innerHTML = content.map(c => typeof c === "string" ? c : c.innerHTML).join("");
            } else if (typeof content === "string") {
                dialogContent.innerHTML = content;
            } else if (content instanceof HTMLElement) {
                dialogContent.innerHTML = "";
                dialogContent.appendChild(content);
            }

            // Show dialog
            document.getElementById("customDialog").classList.remove("hidden");
        }

        function closeDialog() {
            document.getElementById("customDialog").classList.add("hidden");
        }
    </script>

    <link rel="stylesheet" href="https://ffd.pmd.gov.pk/css/owl.carousel.min.css">
    <style>
       .station{
           /*background: #666666;*/
           text-align: center;
           padding: 10px 0px;
           margin: 2px 10px;
           box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
           transition: 0.3s;
           /*padding-right: 20px;*/
           border-radius: 5px;
       }

       .station .station-name{
           background: #0d64fd;
           /*border-radius: 20px;*/
           overflow: hidden;
           white-space: nowrap;
           text-overflow: ellipsis;
           padding: 0 10px;
       }

       .station .gauges{
           display: flex;
           /*justify-content: space-between;*/
       }
       .station .gauges .gauge{
           flex: 1;
       }
    </style>
</head>

<body>

<div id="customDialog" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-4 w-11/12 max-h-[80vh] overflow-auto">
        <div id="dialogContent" class="prose"></div>

        <div class="text-center" style="display: flex; width: 100%">
            <button onclick="closeDialog()" class="btn btn-nature btn-block">
                Close
            </button>
        </div>
    </div>

</div>

<div id="viewDiv" class="esri-view esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge esri-view-orientation-landscape"><div class="esri-view-root"><div class="esri-view-surface esri-view-surface--inset-outline esri-view-surface--touch-none" role="application" tabindex="0"><canvas style="width: 929px; height: 752px; display: block;" width="1161" height="940"></canvas></div><div class="esri-overlay-surface"><div style="visibility: hidden;"></div></div><div class="esri-ui calcite-theme-light" style="inset: 0px;"><div class="esri-ui-inner-container esri-ui-corner-container" style="inset: 15px 15px 30px;"><div class="esri-ui-top-left esri-ui-corner"><div class="esri-component esri-zoom esri-widget"><div class="esri-widget--button esri-widget esri-interactive" role="button" tabindex="0" title="Zoom in"><span aria-hidden="true" role="presentation" class="esri-icon esri-icon-plus"></span><span class="esri-icon-font-fallback-text">Zoom in</span></div><div class="esri-widget--button esri-widget esri-interactive" role="button" tabindex="0" title="Zoom out"><span aria-hidden="true" role="presentation" class="esri-icon esri-icon-minus"></span><span class="esri-icon-font-fallback-text">Zoom out</span></div></div></div><div class="esri-ui-top-right esri-ui-corner"></div><div class="esri-ui-bottom-left esri-ui-corner"></div><div class="esri-ui-bottom-right esri-ui-corner"></div></div><div class="esri-ui-inner-container esri-ui-manual-container"><div class="esri-component esri-attribution esri-widget"><div class="esri-attribution__sources esri-interactive" tabindex="0" role="button">Esri, HERE, Garmin, FAO, NOAA, USGS</div><div class="esri-attribution__powered-by">Powered by <a class="esri-attribution__link" href="http://www.esri.com/" target="_blank" rel="noreferrer">Esri</a></div></div><div class="esri-component" style="display: none;"></div><div class="esri-component" style="display: none;"></div></div></div></div><div class="esri-view-user-storage">
    <div id="meta" style="opacity:0.9;">

        <p class="legend_heading">PMD, Flood Forecasting Division Lahore <br></p>

        <ul class="cl">
            <li><span class="mydot" style="background: rgb(1,115,33)"></span> Normal Flow</li>
            <li><span class="mydot" style="background: rgb(0, 87, 180)"></span>Low Flood</li>
            <li><span class="mydot" style="background: rgb(255, 193, 7)"></span>Medium Flood</li>
            <li><span class="mydot" style="background: rgb(253, 126, 20)"></span>High Flood</li>
            <li><span class="mydot" style="background: rgb(252, 25, 44)"></span>Very High Flood</li>
            <li><span class="mydot" style="background: rgb(161, 2, 17)"></span>Exceptionally High Flood</li>
        </ul>


        <p class="legend_heading">Above the stations symbol is current River discharge in cusecs
        </p>


    </div>
    <div id="meta2" style="opacity:0.7;">


        Map is last updated on <b>29-Nov-2025 06:00 PKT</b><br>
        Data collected from <b>WAPDA</b> and <b>provincial irrigation</b> departments.

    </div>

</div></div>




</body></html>